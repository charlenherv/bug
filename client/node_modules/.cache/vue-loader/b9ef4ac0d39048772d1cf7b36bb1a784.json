{"remainingRequest":"/Users/hervey/Projects/Development/audiomarketplace/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hervey/Projects/Development/audiomarketplace/src/components/pages/Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hervey/Projects/Development/audiomarketplace/src/components/pages/Dashboard.vue","mtime":1632166868777},{"path":"/Users/hervey/Projects/Development/audiomarketplace/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hervey/Projects/Development/audiomarketplace/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hervey/Projects/Development/audiomarketplace/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hervey/Projects/Development/audiomarketplace/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVcGxvYWRCb3ggZnJvbSAiLi4vZ2VuZXJhbC9VcGxvYWRCb3gudnVlIgppbXBvcnQgQXVkaW9Cb3ggZnJvbSAiLi4vYXVkaW8vQXVkaW9Cb3gudnVlIgppbXBvcnQgQWRCb3ggZnJvbSAiLi4vYWRzL0FkQm94LnZ1ZSIKaW1wb3J0IHsgQXVkaW9GdW5jdGlvbnMgfSBmcm9tICcuLi8uLi9taXhpbnMvQXVkaW9GdW5jdGlvbnMuanMnCmltcG9ydCBNZXNzYWdlQm94IGZyb20gIi4uL2dlbmVyYWwvTWVzc2FnZUJveC52dWUiCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRhc2hib2FyZCIsCiAgbWl4aW5zOiBbQXVkaW9GdW5jdGlvbnNdLAogIGNvbXBvbmVudHM6IHsKICAgIFVwbG9hZEJveCwKICAgIEF1ZGlvQm94LAogICAgQWRCb3gsCiAgICBNZXNzYWdlQm94CiAgfSwKICBwcm9wczogWydhcHBEYXRhJ10sCiAgY29tcHV0ZWQ6IHsKICAgIGZlZWRJdGVtcygpIHsgCiAgICAgIHZhciByZWYgPSB0aGlzOwogICAgICB2YXIgZmVlZEl0ZW1zID0gW107CiAgICAgIHZhciBmZWF0dXJlZEZlZWRJdGVtcyA9IFtdOwogICAgICAKICAgICAgdmFyIGFkVGhyZXNob2xkID0gMTA7CiAgICAgIHZhciBhZENvdW50ZXIgPSAxOwogICAgICB2YXIgY291bnRlcjsgCiAgICAgIGZ1bmN0aW9uIGZpbmRDb21tb25FbGVtZW50KGFycmF5MSwgYXJyYXkyKSB7IAogICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYXJyYXkxLmxlbmd0aDsgaSsrKSB7IAogICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGFycmF5Mi5sZW5ndGg7IGorKykgeyAKICAgICAgICAgICAgICAgICAgICBpZihhcnJheTFbaV0gPT09IGFycmF5MltqXSkgeyAKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IAogICAgICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICB9IAogICAgICAgICAgICByZXR1cm4gZmFsc2U7ICAKICAgICAgfQogICAgICBmb3IgKGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgcmVmLmFwcERhdGEubWFpbkl0ZW1zLmxlbmd0aDsgY291bnRlcisrKSB7CiAgICAgICAgICAvLyBCdWlsZCBpdGVtCiAgICAgICAgICB2YXIgaXRlbURhdGEgPSByZWYuYXBwRGF0YS5tYWluSXRlbXNbY291bnRlcl07CiAgICAgICAgICBpdGVtRGF0YS50eXBlID0gIkF1ZGlvQm94IjsKCiAgICAgICAgLy8gQ2hlY2sgYWdhaW5zdCB0YWdzICAgICAgICAKICAgICAgICB2YXIgaXNNYXRjaCA9IGZpbmRDb21tb25FbGVtZW50KHRoaXMuYXBwRGF0YS50YWdzLCBpdGVtRGF0YS5lZGl0YWJsZS50YWdzKTsKICAgICAgICBpZiAodGhpcy5hcHBEYXRhLnRhZ3MubGVuZ3RoIDwgMSB8fCAKICAgICAgICAgIGl0ZW1EYXRhLnR5cGUgPT09ICdBdWRpb0JveCcgJiYgaXNNYXRjaCB8fCAKICAgICAgICAgIGl0ZW1EYXRhLnR5cGUgIT09ICdBdWRpb0JveCcKICAgICAgICApIHsKICAgICAgICAgIAogICAgICAgICAgLy8gQWRkIGF1ZGlvIGl0ZW0KICAgICAgICAgIHZhciBtYXRjaGluZ0l0ZW0gPSByZWYuYXBwRGF0YS5mZWF0dXJlZEl0ZW1zLmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IGl0ZW1EYXRhLmlkCiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChtYXRjaGluZ0l0ZW0ubGVuZ3RoPjApIHsKICAgICAgICAgICAgaXRlbURhdGFbImNvbG9yIl0gPSAieWVsbG93IjsKICAgICAgICAgICAgZmVhdHVyZWRGZWVkSXRlbXMucHVzaChpdGVtRGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaXRlbURhdGFbImNvbG9yIl0gPSAiZ3JleSI7CiAgICAgICAgICAgIGZlZWRJdGVtcy5wdXNoKGl0ZW1EYXRhKTsKICAgICAgICAgICAgYWRDb3VudGVyKysKICAgICAgICAgIH0KICAgICAgICAgIC8vIEFkZCBhZHZlcnRpc21lbnQgaXRlbQogICAgICAgICAgaWYgKGFkQ291bnRlciAlIGFkVGhyZXNob2xkID09PSAwIHx8IGNvdW50ZXIgPT09IDAgKSB7CiAgICAgICAgICAgIGZlZWRJdGVtcy5wdXNoKHsKICAgICAgICAgICAgICAndHlwZSc6ICdBZEJveCcgCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICAgIAogICAgICByZXR1cm4gewogICAgICAgICJtYWluIjogZmVlZEl0ZW1zLAogICAgICAgICJmZWF0dXJlZCI6IGZlYXR1cmVkRmVlZEl0ZW1zCiAgICAgIH07CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXBsb2FkQm94OiB0cnVlLAogICAgICBsb2FkaW5nQXVkaW86IGZhbHNlCiAgICB9CiAgfSwKICBtZXRob2RzOnsKICAgIGluaXRpYWxpemVEYXNoYm9hcmQoKXsKICAgICAgLy92YXIgcmVmID0gdGhpczsKICAgICAgLy90aGlzLmxvYWRTb3VuZCh0aGlzLmZlZWRJdGVtcy5mZWF0dXJlZFswXSx0aGlzLmN1cnJlbnRpdGVtKQogICAgfSwKICAgIGxvYWRNb3JlQXVkaW8oKSB7CiAgICAgIHZhciBuZXdJdGVtcyA9W107CiAgICAgICAgICAKICAgICAgICAgIHRoaXMubG9hZGluZ0F1ZGlvID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuYXBwRGF0YS5tYWluSXRlbXMucHVzaCguLi5uZXdJdGVtcyk7CiAgICAgICAgICB0aGlzLmxvYWRpbmdBdWRpbyA9IGZhbHNlOwogICAgfSwKICAgIG9uRGFzaGJvYXJkU2Nyb2xsKCkgewogICAgICB2YXIgbG9hZGluZ01vcmVGbGFnID0gdGhpcy4kcmVmc1sibG9hZGluZ01vcmUiXTsKICAgICAgaWYgKGxvYWRpbmdNb3JlRmxhZykgewogICAgICAgICAgdmFyIG1hcmdpblRvcCA9IGxvYWRpbmdNb3JlRmxhZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7CiAgICAgICAgICB2YXIgaW5uZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICAgIGlmICgobWFyZ2luVG9wIC0gaW5uZXJIZWlnaHQpIDwgLTUwKSB7ICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgdGhpcy5sb2FkTW9yZUF1ZGlvKCk7CiAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICB9ICAKICAgIH0sCiAgICB0b2dnbGVUYWcodGFnSWQpIHsKICAgICAgaWYgKHRoaXMuYXBwRGF0YS50YWdzLmluY2x1ZGVzKHRhZ0lkKSkgewogICAgICAgIHRoaXMuYXBwRGF0YS50YWdzID0gdGhpcy5hcHBEYXRhLnRhZ3MuZmlsdGVyKGUgPT4gZSAhPT0gdGFnSWQpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXBwRGF0YS50YWdzID0gWy4uLnRoaXMuYXBwRGF0YS50YWdzLHRhZ0lkXTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHZhciByZWYgPSB0aGlzOwogICAgcmVmLmluaXRpYWxpemVEYXNoYm9hcmQoKTsKCiAgICAvLyBDb250aW5vdXMgc2Nyb2xsL0xhenkgbG9hZCBhdWRpbwogICAgdGhpcy5vbkRhc2hib2FyZFNjcm9sbCgpOwogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm9uRGFzaGJvYXJkU2Nyb2xsKTsKICB9Cn07Cg=="},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/components/pages","sourcesContent":["<template>\n  <div :class=\"{\n    'Dashboard':true, \n    'screenShake':(appData.currentItem.id && appData.currentItem.screenShake === true)\n  }\" \n  @scroll=\"onDashboardScroll\">\n    <div class=\"Dashboard_Container\">\n      <div class=\"MessageCenter\">\n        <div class=\"MessageCenter_Left\">\n          <div class=\"MessageCenter_SiteWide\">\n            <MessageBox v-for=\"(item,index) in appData.messages.siteWide\" :key=\"index\" :item=\"item\" :type=\"'siteWide'\" :appData=\"appData\"/>\n          </div>\n        </div>\n        <div class=\"MessageCenter_Right\">\n          <div class=\"MessageCenter_UserRelated\">\n            <MessageBox v-for=\"(item,index) in appData.messages.userRelated\" :key=\"index\" :item=\"item\" :type=\"'userRelated'\" :appData=\"appData\"/>\n          </div>\n        </div>\n        </div>\n\n        <UploadBox v-if=\"uploadBox\" :appData=\"appData\"/>\n\n        <div class=\"MainFeed\">\n            <div style=\"margin-bottom:5px\">\n              <div class=\"AudioBox_Tags\" v-for=\"(tag,index) in appData.itemSettings.tags\" :key=\"index\" :data-button=\"appData.tags.includes(tag.id) ? 'on': 'off'\" :data-button-color=\"'grey, blue'\" @click=\"toggleTag(tag.id)\">{{tag.label}}</div>\n            </div>\n          \n            <!-- Featured Audio and Ad Items -->\n            <div class=\"FeaturedItems\" v-if=\"feedItems.featured.length>0\">\n              <component class=\"FeedItem\" v-for=\"(item,index) in feedItems.featured\" :key=\"index\" v-bind:is=\"item.type\" :mode=\"'mainFeed'\" :item=\"item\"  :appData=\"appData\"/>\n            </div>\n            <!-- Audio and Ads Items -->\n            <div class=\"MainItems\">\n              <component class=\"FeedItem\" v-for=\"(item,index) in feedItems.main\" :key=\"index\" v-bind:is=\"item.type\" :mode=\"'mainFeed'\" :item=\"item\"  :appData=\"appData\"/>\n            </div>\n        </div>\n    </div>\n    <div class=\"Dashboard_LoadingMore\" ref=\"loadingMore\" data-button=\"\" data-button-color=\"grey,blue\" :style=\"{opacity: loadingAudio ? 1 : 0}\">Loading more...</div>\n  </div>\n</template>\n\n<script>\nimport UploadBox from \"../general/UploadBox.vue\"\nimport AudioBox from \"../audio/AudioBox.vue\"\nimport AdBox from \"../ads/AdBox.vue\"\nimport { AudioFunctions } from '../../mixins/AudioFunctions.js'\nimport MessageBox from \"../general/MessageBox.vue\"\n\nexport default {\n  name: \"Dashboard\",\n  mixins: [AudioFunctions],\n  components: {\n    UploadBox,\n    AudioBox,\n    AdBox,\n    MessageBox\n  },\n  props: ['appData'],\n  computed: {\n    feedItems() { \n      var ref = this;\n      var feedItems = [];\n      var featuredFeedItems = [];\n      \n      var adThreshold = 10;\n      var adCounter = 1;\n      var counter; \n      function findCommonElement(array1, array2) { \n            for(let i = 0; i < array1.length; i++) { \n                for(let j = 0; j < array2.length; j++) { \n                    if(array1[i] === array2[j]) { \n                        return true; \n                    } \n                } \n            } \n            return false;  \n      }\n      for (counter = 0; counter < ref.appData.mainItems.length; counter++) {\n          // Build item\n          var itemData = ref.appData.mainItems[counter];\n          itemData.type = \"AudioBox\";\n\n        // Check against tags        \n        var isMatch = findCommonElement(this.appData.tags, itemData.editable.tags);\n        if (this.appData.tags.length < 1 || \n          itemData.type === 'AudioBox' && isMatch || \n          itemData.type !== 'AudioBox'\n        ) {\n          \n          // Add audio item\n          var matchingItem = ref.appData.featuredItems.filter(item => {\n            return item.id === itemData.id\n          });\n          if (matchingItem.length>0) {\n            itemData[\"color\"] = \"yellow\";\n            featuredFeedItems.push(itemData);\n          }\n          else {\n            itemData[\"color\"] = \"grey\";\n            feedItems.push(itemData);\n            adCounter++\n          }\n          // Add advertisment item\n          if (adCounter % adThreshold === 0 || counter === 0 ) {\n            feedItems.push({\n              'type': 'AdBox' \n            });\n          }\n        }\n      }\n        \n      return {\n        \"main\": feedItems,\n        \"featured\": featuredFeedItems\n      };\n    }\n  },\n  data() {\n    return {\n      uploadBox: true,\n      loadingAudio: false\n    }\n  },\n  methods:{\n    initializeDashboard(){\n      //var ref = this;\n      //this.loadSound(this.feedItems.featured[0],this.currentitem)\n    },\n    loadMoreAudio() {\n      var newItems =[];\n          \n          this.loadingAudio = true;\n          this.appData.mainItems.push(...newItems);\n          this.loadingAudio = false;\n    },\n    onDashboardScroll() {\n      var loadingMoreFlag = this.$refs[\"loadingMore\"];\n      if (loadingMoreFlag) {\n          var marginTop = loadingMoreFlag.getBoundingClientRect().top;\n          var innerHeight = window.innerHeight;\n      if ((marginTop - innerHeight) < -50) {                 \n            this.loadMoreAudio();\n          }                               \n      }  \n    },\n    toggleTag(tagId) {\n      if (this.appData.tags.includes(tagId)) {\n        this.appData.tags = this.appData.tags.filter(e => e !== tagId);\n      } else {\n        this.appData.tags = [...this.appData.tags,tagId];\n      }\n    }\n  },\n  mounted() {\n    var ref = this;\n    ref.initializeDashboard();\n\n    // Continous scroll/Lazy load audio\n    this.onDashboardScroll();\n  },\n  beforeDestroy() {\n    window.removeEventListener('scroll', this.onDashboardScroll);\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n$border-size: 2px;\n$border-radius: 10px;\n  .Dashboard {  \n    &::-webkit-scrollbar {\n      display: none;\n    }\n    -ms-overflow-style: none;  /* IE and Edge */\n    scrollbar-width: none;  /* Firefox */\n    flex-grow: 1;\n    margin-left:20px;\n    margin-right:20px;\n    overflow-y: auto;\n    overflow-x: hidden;\n    text-align: center;\n    .FeaturedItems {\n      float: left;\n      width: calc(52% - 40px);\n      margin-right: 20px;\n    }\n    @media only screen and (max-width: 600px) {\n      .FeaturedItems {\n        width: 100%;\n        margin-right: 0;\n        margin-bottom:20px;\n        float: none;\n      }\n    }\n    .FeedItem {      \n      margin-bottom:20px;\n    }\n    &::-webkit-scrollbar {\n      display: none;\n    }\n    -ms-overflow-style: none;\n\n    &.screenShake {\n      -webkit-animation: screenShake 0.025s linear infinite both;\n      animation: screenShake 0.025s linear infinite both;\n    }\n  }\n  .Dashboard_Container {\n    margin: 0 auto 20px auto;\n    max-width: 1000px;\n  }\n  .MainFeed {\n    padding-top: 10px;\n    border-top: 1px solid rgba(0,0,0,0.1);\n  }\n  .MessageCenter {\n    overflow: hidden;\n  }\n  @-webkit-keyframes screenShake {\n    0% {\n      -webkit-transform: translate(0);\n              transform: translate(0);\n    }\n    10% {\n      -webkit-transform: translate(-2px, -2px);\n              transform: translate(-2px, -2px);\n    }\n    20% {\n      -webkit-transform: translate(2px, -2px);\n              transform: translate(2px, -2px);\n    }\n    30% {\n      -webkit-transform: translate(-2px, 2px);\n              transform: translate(-2px, 2px);\n    }\n    40% {\n      -webkit-transform: translate(2px, 2px);\n              transform: translate(2px, 2px);\n    }\n    50% {\n      -webkit-transform: translate(-2px, -2px);\n              transform: translate(-2px, -2px);\n    }\n    60% {\n      -webkit-transform: translate(2px, -2px);\n              transform: translate(2px, -2px);\n    }\n    70% {\n      -webkit-transform: translate(-2px, 2px);\n              transform: translate(-2px, 2px);\n    }\n    80% {\n      -webkit-transform: translate(-2px, -2px);\n              transform: translate(-2px, -2px);\n    }\n    90% {\n      -webkit-transform: translate(2px, -2px);\n              transform: translate(2px, -2px);\n    }\n    100% {\n      -webkit-transform: translate(0);\n              transform: translate(0);\n    }\n  }\n  @keyframes screenShake {\n    0% {\n      -webkit-transform: translate(0);\n              transform: translate(0);\n    }\n    10% {\n      -webkit-transform: translate(-2px, -2px);\n              transform: translate(-2px, -2px);\n    }\n    20% {\n      -webkit-transform: translate(2px, -2px);\n              transform: translate(2px, -2px);\n    }\n    30% {\n      -webkit-transform: translate(-2px, 2px);\n              transform: translate(-2px, 2px);\n    }\n    40% {\n      -webkit-transform: translate(2px, 2px);\n              transform: translate(2px, 2px);\n    }\n    50% {\n      -webkit-transform: translate(-2px, -2px);\n              transform: translate(-2px, -2px);\n    }\n    60% {\n      -webkit-transform: translate(2px, -2px);\n              transform: translate(2px, -2px);\n    }\n    70% {\n      -webkit-transform: translate(-2px, 2px);\n              transform: translate(-2px, 2px);\n    }\n    80% {\n      -webkit-transform: translate(-2px, -2px);\n              transform: translate(-2px, -2px);\n    }\n    90% {\n      -webkit-transform: translate(2px, -2px);\n              transform: translate(2px, -2px);\n    }\n    100% {\n      -webkit-transform: translate(0);\n              transform: translate(0);\n    }\n  }\n\n\n  :last-child {\n    margin-bottom: 20px;\n  }\n</style>\n"]}]}