{"remainingRequest":"/Users/hervey/bug/client/node_modules/thread-loader/dist/cjs.js!/Users/hervey/bug/client/node_modules/babel-loader/lib/index.js!/Users/hervey/bug/client/src/mixins/AudioFunctions.js","dependencies":[{"path":"/Users/hervey/bug/client/src/mixins/AudioFunctions.js","mtime":1638580289031},{"path":"/Users/hervey/bug/client/babel.config.js","mtime":1599433133201},{"path":"/Users/hervey/bug/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hervey/bug/client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hervey/bug/client/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLmJpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZsb2F0MzItYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5hdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmNvcHktd2l0aGluLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZXZlcnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWxsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5sYXN0LWluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLXJpZ2h0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmV2ZXJzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29tZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zdWJhcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLWxvY2FsZS1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS51aW50OC1hcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXRoLmxvZzEwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHsgSG93bCwgSG93bGVyIH0gZnJvbSAnaG93bGVyJzsKZXhwb3J0IHZhciBBdWRpb0Z1bmN0aW9ucyA9IHsKICBtZXRob2RzOiB7CiAgICBwbGF5QmVhdDogZnVuY3Rpb24gcGxheUJlYXQoY29tcG9uZW50Q29udGV4dCkgewogICAgICBIb3dsZXIuc3RvcCgpOwogICAgICB2YXIgbWV0aG9kc1JlZmVyZW5jZSA9IHRoaXM7CgogICAgICBpZiAoY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwuc291bmRPYmplY3QpIHsKICAgICAgICBjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5zb3VuZE9iamVjdC52b2x1bWUoMSk7CiAgICAgICAgY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwuc291bmRPYmplY3QucGxheSgpOwogICAgICB9IGVsc2UgewogICAgICAgIG1ldGhvZHNSZWZlcmVuY2UubG9hZFNvdW5kKGNvbXBvbmVudENvbnRleHQpOwogICAgICB9CiAgICB9LAogICAgc3RvcFNvdW5kOiBmdW5jdGlvbiBzdG9wU291bmQoY29tcG9uZW50Q29udGV4dCkgewogICAgICAvLyBGYWRlIG91dCB0aGVuIHN0b3AKICAgICAgdmFyIGZhZGVPdXRUaW1lID0gNTAwOwogICAgICBjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5zb3VuZE9iamVjdC5mYWRlKDEsIDAsIDUwMCk7CiAgICAgIGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLmZhZGVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLnNvdW5kT2JqZWN0LnN0b3AoKTsKICAgICAgfSwgZmFkZU91dFRpbWUpOwogICAgfSwKICAgIHBhdXNlU291bmQ6IGZ1bmN0aW9uIHBhdXNlU291bmQoY29tcG9uZW50Q29udGV4dCkgewogICAgICBjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5zb3VuZE9iamVjdC5wbGF5KCk7CiAgICB9LAogICAgdXBkYXRlQ3VycmVudFRpbWU6IGZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRUaW1lKGNvbXBvbmVudENvbnRleHQpIHsKICAgICAgdmFyIGN1cnJlbnRUaW1lID0gY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwuc291bmRPYmplY3Quc2VlaygpIHx8IDA7CiAgICB9LAogICAgbG9hZFNvdW5kOiBmdW5jdGlvbiBsb2FkU291bmQoY29tcG9uZW50Q29udGV4dCkgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBtZXRob2RzUmVmZXJlbmNlOiB0aGlzCiAgICAgIH07IC8vIENsZWFyIGZhZGUgdGltZXIKCiAgICAgIGlmIChjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5mYWRlVGltZXIpIHsKICAgICAgICBjbGVhclRpbW91dChjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5mYWRlVGltZXIpOwogICAgICB9IC8vIENyZWF0ZSBzb3VuZCBvYmplY3QKCgogICAgICBWdWUuc2V0KGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLCAnc291bmRPYmplY3QnLCBuZXcgSG93bCh7CiAgICAgICAgc3JjOiAnLi9hdWRpby8nICsgY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwuZmlsZW5hbWUgKyAnLm1wMycsCiAgICAgICAgdm9sdW1lOiAxLAogICAgICAgIC8vIEV2ZW50cwogICAgICAgIG9ucGxheTogZnVuY3Rpb24gb25wbGF5KCkgewogICAgICAgICAgZGF0YS5tZXRob2RzUmVmZXJlbmNlLnVwZGF0ZUN1cnJlbnRUaW1lKGNvbXBvbmVudENvbnRleHQsIGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLnNvdW5kT2JqZWN0KTsKICAgICAgICAgIGNvbXBvbmVudENvbnRleHQuc291bmRPYmplY3RSQUYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlUHJvZ3Jlc3MuYmluZChjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5zb3VuZE9iamVjdCkpOwogICAgICAgIH0sCiAgICAgICAgb25sb2FkOiBmdW5jdGlvbiBvbmxvYWQoKSB7CiAgICAgICAgICBWdWUuc2V0KGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLCAnZHVyYXRpb24nLCBjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5zb3VuZE9iamVjdC5fZHVyYXRpb24pOwogICAgICAgICAgZGF0YS5tZXRob2RzUmVmZXJlbmNlLnBsYXlCZWF0KGNvbXBvbmVudENvbnRleHQpOwogICAgICAgIH0sCiAgICAgICAgb25lbmQ6IGZ1bmN0aW9uIG9uZW5kKCkgewogICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoY29tcG9uZW50Q29udGV4dC5zb3VuZE9iamVjdFJBRik7CiAgICAgICAgICB2YXIgbmV4dEluZGV4ID0gY29tcG9uZW50Q29udGV4dC5sZXZlbHMuZmluZEluZGV4KGZ1bmN0aW9uIChzb25nKSB7CiAgICAgICAgICAgIHJldHVybiBzb25nLl9pZCA9PT0gY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwuX2lkOwogICAgICAgICAgfSkgKyAxOwoKICAgICAgICAgIGlmIChuZXh0SW5kZXggPT09IGNvbXBvbmVudENvbnRleHQubGV2ZWxzLmxlbmd0aCkgewogICAgICAgICAgICBjb21wb25lbnRDb250ZXh0LmVuZEdhbWUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsID0gY29tcG9uZW50Q29udGV4dC5sZXZlbHNbbmV4dEluZGV4XTsgLy8gU2V0IG5leHQgbGV2ZWwKCiAgICAgICAgICAgIGNvbXBvbmVudENvbnRleHQuc3RhcnRMZXZlbCgpOyAvLyBTdGFydCBsZXZlbAogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb25wYXVzZTogZnVuY3Rpb24gb25wYXVzZSgpIHsKICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGNvbXBvbmVudENvbnRleHQuc291bmRPYmplY3RSQUYpOwogICAgICAgIH0sCiAgICAgICAgb25zdG9wOiBmdW5jdGlvbiBvbnN0b3AoKSB7CiAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShjb21wb25lbnRDb250ZXh0LnNvdW5kT2JqZWN0UkFGKTsKICAgICAgICB9LAogICAgICAgIG9uc2VlazogZnVuY3Rpb24gb25zZWVrKCkgewogICAgICAgICAgZGF0YS5tZXRob2RzUmVmZXJlbmNlLnVwZGF0ZUN1cnJlbnRUaW1lKGNvbXBvbmVudENvbnRleHQsIGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLnNvdW5kT2JqZWN0KTsKICAgICAgICAgIGNvbXBvbmVudENvbnRleHQuc291bmRPYmplY3RSQUYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlUHJvZ3Jlc3MuYmluZChjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5zb3VuZE9iamVjdCkpOwogICAgICAgIH0KICAgICAgfSkpOyAvLyBFZmZlY3RzCiAgICAgIC8vIENyZWF0ZSBhbiBhbmFseXNlciBub2RlIGluIHRoZSBIb3dsZXIgV2ViQXVkaW8gY29udGV4dAoKICAgICAgdmFyIGNvbnRleHQgPSBIb3dsZXIuY3R4OwogICAgICB2YXIgYXVkaW9Tb3VyY2VOb2RlID0gY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwuc291bmRPYmplY3QpOwogICAgICB2YXIgYW5hbHlzZXIgPSBjb250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7CiAgICAgIGFuYWx5c2VyLmZmdFNpemUgPSAxMDI0OwogICAgICB2YXIgYnVmZmVyTGVuZ3RoID0gYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQ7CiAgICAgIHZhciBkYXRhQXJyYXk7CiAgICAgIHZhciBtb2RlID0gMjsKCiAgICAgIGlmIChtb2RlID09PSAxKSB7CiAgICAgICAgZGF0YUFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShhbmFseXNlci5mZnRTaXplKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkYXRhQXJyYXkgPSBuZXcgVWludDhBcnJheShhbmFseXNlci5mZnRTaXplKTsKICAgICAgfQoKICAgICAgYXVkaW9Tb3VyY2VOb2RlLmNvbm5lY3QoYW5hbHlzZXIpOwogICAgICBIb3dsZXIubWFzdGVyR2Fpbi5jb25uZWN0KGFuYWx5c2VyKTsgLy8gR2V0IGxldmVscwoKICAgICAgZnVuY3Rpb24gZ2V0TGV2ZWxzKCkgewogICAgICAgIHZhciBsZXZlbHNIZXJ0eiA9IFtdOwogICAgICAgIHZhciBsZXZlbHNQZXJjID0gW107CiAgICAgICAgdmFyIHNlY3Rpb25TcGxpdCA9IDE2OwogICAgICAgIHZhciBzZWN0aW9ucyA9IGJ1ZmZlckxlbmd0aCAvIHNlY3Rpb25TcGxpdDsKCiAgICAgICAgaWYgKG1vZGUgPT09IDEgfHwgbW9kZSA9PT0gMikgewogICAgICAgICAgdmFyIGZpbmFsQXJyYXkgPSBkYXRhQXJyYXk7CgogICAgICAgICAgaWYgKG1vZGUgPT09IDIpIHsKICAgICAgICAgICAgZmluYWxBcnJheSA9IEZsb2F0MzJBcnJheS5mcm9tKGRhdGFBcnJheSk7CiAgICAgICAgICB9CgogICAgICAgICAgZm9yICh2YXIgc2VjID0gMDsgc2VjIDwgc2VjdGlvbnM7IHNlYysrKSB7CiAgICAgICAgICAgIHZhciBtaW5CaW4gPSBzZWMgKiBzZWN0aW9uU3BsaXQ7CiAgICAgICAgICAgIHZhciBtYXhCaW4gPSAoc2VjICsgMSkgKiBzZWN0aW9uU3BsaXQ7CiAgICAgICAgICAgIHZhciBudW1PZkJpbnMgPSBtYXhCaW4gLSBtaW5CaW47CiAgICAgICAgICAgIHZhciBiaW5JdGVtcyA9IDA7CgogICAgICAgICAgICBmb3IgKHZhciBpID0gbWluQmluOyBpIDwgbWF4QmluOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgY2FsY051bSA9IGZpbmFsQXJyYXlbaV07CgogICAgICAgICAgICAgIGlmIChtb2RlID09PSAyKSB7CiAgICAgICAgICAgICAgICBjYWxjTnVtID0gKGNhbGNOdW0gLSAxMjgpIC8gMTI4OwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYmluSXRlbXMgKz0gTWF0aC5wb3coY2FsY051bSwgMik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBoZXJ0eiA9IDEwICogTWF0aC5sb2cxMChiaW5JdGVtcyAvIG51bU9mQmlucyk7CiAgICAgICAgICAgIHZhciBwZXJjID0gKDEwMCArIGhlcnR6KS50b0ZpeGVkKCk7CiAgICAgICAgICAgIGxldmVsc0hlcnR6LnB1c2goaGVydHopOwogICAgICAgICAgICBsZXZlbHNQZXJjLnB1c2gocGVyYyk7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBVcGRhdGUgbGV2ZWxzCgoKICAgICAgICB2YXIgbGV2ZWxzID0gewogICAgICAgICAgJ2hlcnR6JzogbGV2ZWxzSGVydHosCiAgICAgICAgICAncGVyYyc6IGxldmVsc1BlcmMKICAgICAgICB9OwogICAgICAgIFZ1ZS5zZXQoY29tcG9uZW50Q29udGV4dC5hdWRpbywgJ2xldmVscycsIGxldmVscyk7CiAgICAgICAgcmV0dXJuIGxldmVsczsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZGV0ZWN0TGV2ZWwob3B0aW9ucykgewogICAgICAgIHZhciBoZXJ0elRlc3QgPSB0cnVlOwogICAgICAgIHZhciBsZXZlbHMgPSBnZXRMZXZlbHMoKTsKCiAgICAgICAgaWYgKG9wdGlvbnMubW9kZSA9PT0gJ2FueScpIHsKICAgICAgICAgIGlmIChvcHRpb25zLmFib3ZlTGV2ZWwpIHsKICAgICAgICAgICAgdmFyIGFueUFib3ZlID0gZmFsc2U7CgogICAgICAgICAgICBmb3IgKHZhciBsZXZlbEluZGV4ID0gb3B0aW9ucy5hYm92ZUxldmVsOyBsZXZlbEluZGV4IDwgbGV2ZWxzLmhlcnR6Lmxlbmd0aDsgbGV2ZWxJbmRleCsrKSB7CiAgICAgICAgICAgICAgaWYgKGxldmVscy5oZXJ0eltsZXZlbEluZGV4XSA+IG9wdGlvbnMudGhyZXNob2xkKSB7CiAgICAgICAgICAgICAgICBhbnlBYm92ZSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAob3B0aW9ucy5leGNsdWRlQmVsb3cpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBfbGV2ZWxJbmRleCA9IDA7IF9sZXZlbEluZGV4IDwgb3B0aW9ucy5leGNsdWRlQmVsb3c7IF9sZXZlbEluZGV4KyspIHsKICAgICAgICAgICAgICAgIGlmIChsZXZlbHMuaGVydHpbX2xldmVsSW5kZXhdID4gb3B0aW9ucy50aHJlc2hvbGQpIHsKICAgICAgICAgICAgICAgICAgYW55QWJvdmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChhbnlBYm92ZSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICBoZXJ0elRlc3QgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgbnVtT2ZMZXZlbHMgPSBvcHRpb25zLm1heExldmVsIC0gb3B0aW9ucy5taW5MZXZlbDsKICAgICAgICAgIHZhciBsZXZlbEl0ZW1zID0gMDsKCiAgICAgICAgICBmb3IgKHZhciBfbGV2ZWxJbmRleDIgPSBvcHRpb25zLm1pbkxldmVsOyBfbGV2ZWxJbmRleDIgPCBvcHRpb25zLm1heExldmVsOyBfbGV2ZWxJbmRleDIrKykgewogICAgICAgICAgICBsZXZlbEl0ZW1zICs9IGxldmVscy5oZXJ0eltfbGV2ZWxJbmRleDJdOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBpbmNsdWRlSGVydHogPSBsZXZlbEl0ZW1zIC8gbnVtT2ZMZXZlbHM7CiAgICAgICAgICB2YXIgZXhjbHVkZUhlcnR6OwoKICAgICAgICAgIGlmIChvcHRpb25zLm1pbkV4Y2x1ZGUpIHsKICAgICAgICAgICAgdmFyIG51bU9mRXhMZXZlbHMgPSBvcHRpb25zLm1heEV4Y2x1ZGUgLSBvcHRpb25zLm1pbkV4Y2x1ZGU7CiAgICAgICAgICAgIHZhciBleExldmVsSXRlbXMgPSAwOwoKICAgICAgICAgICAgZm9yICh2YXIgZXhMZXZlbEluZGV4ID0gb3B0aW9ucy5taW5FeGNsdWRlOyBleExldmVsSW5kZXggPCBvcHRpb25zLm1heEV4Y2x1ZGU7IGV4TGV2ZWxJbmRleCsrKSB7CiAgICAgICAgICAgICAgZXhMZXZlbEl0ZW1zICs9IGxldmVscy5oZXJ0eltleExldmVsSW5kZXhdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBleGNsdWRlSGVydHogPSBleExldmVsSXRlbXMgLyBudW1PZkV4TGV2ZWxzOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChpbmNsdWRlSGVydHogPCBvcHRpb25zLnRocmVzaG9sZCkgewogICAgICAgICAgICBoZXJ0elRlc3QgPSBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZXhjbHVkZUhlcnR6ICYmIGV4Y2x1ZGVIZXJ0eiA+IG9wdGlvbnMuZXhUaHJlc2hvbGQpIHsKICAgICAgICAgICAgaGVydHpUZXN0ID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoaGVydHpUZXN0ID09PSB0cnVlKSB7CiAgICAgICAgICBWdWUuc2V0KGNvbXBvbmVudENvbnRleHQuYXVkaW8sIG9wdGlvbnMubmFtZSwgdHJ1ZSk7CiAgICAgICAgICB2YXIgc29uZ1RpbWVyID0gb3B0aW9ucy5uYW1lICsgJ1RpbWVyJzsKCiAgICAgICAgICBpZiAoY29tcG9uZW50Q29udGV4dC5hdWRpb1tzb25nVGltZXJdKSB7CiAgICAgICAgICAgIGNsZWFyVGltZW91dChjb21wb25lbnRDb250ZXh0LmF1ZGlvW3NvbmdUaW1lcl0pOwogICAgICAgICAgfQoKICAgICAgICAgIFZ1ZS5zZXQoY29tcG9uZW50Q29udGV4dC5hdWRpbywgc29uZ1RpbWVyLCBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgVnVlLnNldChjb21wb25lbnRDb250ZXh0LmF1ZGlvLCBvcHRpb25zLm5hbWUsIGZhbHNlKTsKICAgICAgICAgICAgVnVlLnNldChjb21wb25lbnRDb250ZXh0LmF1ZGlvLCBzb25nVGltZXIsICIiKTsKICAgICAgICAgIH0sIG9wdGlvbnMucmVsZWFzZSkpOyAvLyBCYXNzIHN0ZXBzCgogICAgICAgICAgaWYgKG9wdGlvbnMuYmFzc1N0ZXBzKSB7CiAgICAgICAgICAgIGlmICgxID09PSAxCiAgICAgICAgICAgIC8qY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwuYmFzc1N0ZXBzICYmIGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLmJhc3NTdGVwcy5jdXJyZW50ICE9PSBmYWxzZSovCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGlmICgxID09PSAxCiAgICAgICAgICAgICAgLypjb21wb25lbnRDb250ZXh0LmJhc3NTdGVwc1sndHJpZ2dlciddID09PSB0cnVlKi8KICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIFZ1ZS5zZXQoY29tcG9uZW50Q29udGV4dC5hdWRpby5iYXNzU3RlcHMsICd0cmlnZ2VyJywgZmFsc2UpOyAvLyBUcmlnZ2VyIG9mZgogICAgICAgICAgICAgICAgLy8gTmV4dCBzdGVwCgogICAgICAgICAgICAgICAgdmFyIG5ld1N0ZXAgPSBjb21wb25lbnRDb250ZXh0LmF1ZGlvLmJhc3NTdGVwcy5jdXJyZW50ICsgMSA+IG9wdGlvbnMuYmFzc1N0ZXBzLmNvdW50ID8gMCA6IGNvbXBvbmVudENvbnRleHQuYXVkaW8uYmFzc1N0ZXBzLmN1cnJlbnQgKyAxOwogICAgICAgICAgICAgICAgVnVlLnNldChjb21wb25lbnRDb250ZXh0LmF1ZGlvLmJhc3NTdGVwcywgJ2N1cnJlbnQnLCBuZXdTdGVwKTsgLy8gVHJpZ2dlciB0aW1lcgoKICAgICAgICAgICAgICAgIFZ1ZS5zZXQoY29tcG9uZW50Q29udGV4dC5hdWRpby5iYXNzU3RlcHMsICd0aW1lcicsIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBWdWUuc2V0KGNvbXBvbmVudENvbnRleHQuYXVkaW8uYmFzc1N0ZXBzLCAndHJpZ2dlcicsIHRydWUpOyAvLyBUcmlnZ2VyIG9uCiAgICAgICAgICAgICAgICB9LCAnMTAwJykpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBWdWUuc2V0KGNvbXBvbmVudENvbnRleHQsICdhdWRpby5iYXNzU3RlcHMudHJpZ2dlcicsIGZhbHNlKTsgLy8gVHJpZ2dlciBvZmYKCiAgICAgICAgICAgICAgVnVlLnNldChjb21wb25lbnRDb250ZXh0LCAnYXVkaW8uYmFzc1N0ZXBzJywgewogICAgICAgICAgICAgICAgJ2N1cnJlbnQnOiAwCiAgICAgICAgICAgICAgfSk7IC8vIEluaXRpYWwgc3RlcAogICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGltZXIKCiAgICAgICAgICAgICAgVnVlLnNldChjb21wb25lbnRDb250ZXh0LmF1ZGlvLmJhc3NTdGVwcywgJ3RpbWVyJywgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBWdWUuc2V0KGNvbXBvbmVudENvbnRleHQuYXVkaW8uYmFzc1N0ZXBzLCAndHJpZ2dlcicsIHRydWUpOyAvLyBUcmlnZ2VyIG9uCiAgICAgICAgICAgICAgfSwgJzg3LjUnKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBwcmV2aW91c0RlbHRhID0gMCwKICAgICAgICAgIGZwc0xpbWl0ID0gNjA7CgogICAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcyhjdXJyZW50RGVsdGEpIHsKICAgICAgICB2YXIgb2JqZWN0ID0gdGhpczsKICAgICAgICB2YXIgZGVsdGEgPSBjdXJyZW50RGVsdGEgLSBwcmV2aW91c0RlbHRhOwoKICAgICAgICBpZiAoZnBzTGltaXQgJiYgZGVsdGEgPCAxMDAwIC8gZnBzTGltaXQpIHsvLyBXYWl0CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIElmIHNvdW5kIG5vZGUgZXhpc3RzIGluIHRoaXMgbW9tZW50CiAgICAgICAgICBpZiAob2JqZWN0Ll9zb3VuZHNbMF0pIHsKICAgICAgICAgICAgZGF0YS5tZXRob2RzUmVmZXJlbmNlLnVwZGF0ZUN1cnJlbnRUaW1lKGNvbXBvbmVudENvbnRleHQsIG9iamVjdCk7IC8vIEZyZXF1ZW5jeSBhbmltYXRlCgogICAgICAgICAgICBpZiAobW9kZSA9PT0gMSkgewogICAgICAgICAgICAgIGFuYWx5c2VyLmdldEZsb2F0VGltZURvbWFpbkRhdGEoZGF0YUFycmF5KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSAyKSB7CiAgICAgICAgICAgICAgYW5hbHlzZXIuZ2V0Qnl0ZVRpbWVEb21haW5EYXRhKGRhdGFBcnJheSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGdldExldmVscygpOyAvLyBEZWVwIEJhc3MKCiAgICAgICAgICAgIGRldGVjdExldmVsKHsKICAgICAgICAgICAgICBuYW1lOiAnZGVlcEJhc3MnLAogICAgICAgICAgICAgIG1pbkxldmVsOiAxLAogICAgICAgICAgICAgIG1heExldmVsOiA3LAogICAgICAgICAgICAgIHRocmVzaG9sZDogLTUsCiAgICAgICAgICAgICAgcmVsZWFzZTogMjUwLAogICAgICAgICAgICAgIGJhc3NTdGVwczogewogICAgICAgICAgICAgICAgcG93ZXI6IHRydWUsCiAgICAgICAgICAgICAgICBjb3VudDogNgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7IC8vIENyYXp5IEJhc3MKCiAgICAgICAgICAgIGRldGVjdExldmVsKHsKICAgICAgICAgICAgICBuYW1lOiAnY3JhenlCYXNzJywKICAgICAgICAgICAgICBtaW5MZXZlbDogMSwKICAgICAgICAgICAgICBtYXhMZXZlbDogNCwKICAgICAgICAgICAgICB0aHJlc2hvbGQ6IC0zLAogICAgICAgICAgICAgIHJlbGVhc2U6IDI1MAogICAgICAgICAgICB9KTsgLy8gTWlkIEJhc3MKCiAgICAgICAgICAgIGRldGVjdExldmVsKHsKICAgICAgICAgICAgICBuYW1lOiAnbWlkQmFzcycsCiAgICAgICAgICAgICAgbWluTGV2ZWw6IDUsCiAgICAgICAgICAgICAgbWF4TGV2ZWw6IDEwLAogICAgICAgICAgICAgIHRocmVzaG9sZDogLTEwLAogICAgICAgICAgICAgIHJlbGVhc2U6IDI1MAogICAgICAgICAgICB9KTsgLy8gVHJlYmVsCgogICAgICAgICAgICBkZXRlY3RMZXZlbCh7CiAgICAgICAgICAgICAgbmFtZTogJ3RyZWJsZScsCiAgICAgICAgICAgICAgbW9kZTogJ2FueScsCiAgICAgICAgICAgICAgYWJvdmVMZXZlbDogMjUsCiAgICAgICAgICAgICAgdGhyZXNob2xkOiAtMTAsCiAgICAgICAgICAgICAgZXhjbHVkZUJlbG93OiAyMCwKICAgICAgICAgICAgICBleFRocmVzaG9sZDogLTQwLAogICAgICAgICAgICAgIHJlbGVhc2U6IDUwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHByZXZpb3VzRGVsdGEgPSBjdXJyZW50RGVsdGE7CiAgICAgICAgfQoKICAgICAgICBpZiAob2JqZWN0LnBsYXlpbmcoKSkgewogICAgICAgICAgY29tcG9uZW50Q29udGV4dC5zb3VuZE9iamVjdFJBRiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGVQcm9ncmVzcy5iaW5kKG9iamVjdCkpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/hervey/bug/client/src/mixins/AudioFunctions.js"],"names":["Vue","_","Howl","Howler","AudioFunctions","methods","playBeat","componentContext","stop","methodsReference","currentLevel","soundObject","volume","play","loadSound","stopSound","fadeOutTime","fade","fadeTimer","setTimeout","pauseSound","updateCurrentTime","currentTime","seek","data","clearTimout","set","src","filename","onplay","soundObjectRAF","requestAnimationFrame","updateProgress","bind","onload","_duration","onend","cancelAnimationFrame","nextIndex","levels","findIndex","song","_id","length","endGame","startLevel","onpause","onstop","onseek","context","ctx","audioSourceNode","createBufferSource","analyser","createAnalyser","fftSize","bufferLength","frequencyBinCount","dataArray","mode","Float32Array","Uint8Array","connect","masterGain","getLevels","levelsHertz","levelsPerc","sectionSplit","sections","finalArray","from","sec","minBin","maxBin","numOfBins","binItems","i","calcNum","hertz","Math","log10","perc","toFixed","push","audio","detectLevel","options","hertzTest","aboveLevel","anyAbove","levelIndex","threshold","excludeBelow","numOfLevels","maxLevel","minLevel","levelItems","includeHertz","excludeHertz","minExclude","numOfExLevels","maxExclude","exLevelItems","exLevelIndex","exThreshold","name","songTimer","clearTimeout","release","bassSteps","newStep","current","count","previousDelta","fpsLimit","currentDelta","object","delta","_sounds","getFloatTimeDomainData","getByteTimeDomainData","power","playing"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport _ from 'lodash';\nimport { Howl, Howler } from 'howler';\nexport const AudioFunctions = {\n    methods: {\n        playBeat(componentContext) {\n            Howler.stop()\n            const methodsReference = this;\n            if (componentContext.currentLevel.soundObject) {\n            componentContext.currentLevel.soundObject.volume(1);\n            componentContext.currentLevel.soundObject.play();\n            } else {\n                methodsReference.loadSound(componentContext);\n            }\n        },\n        stopSound(componentContext) {\n\n            // Fade out then stop\n            const fadeOutTime = 500;\n            componentContext.currentLevel.soundObject.fade(1, 0, 500);\n            componentContext.currentLevel.fadeTimer = setTimeout(function(){\n                componentContext.currentLevel.soundObject.stop();\n            }, fadeOutTime);\n            \n        },\n        pauseSound(componentContext) {\n            componentContext.currentLevel.soundObject.play();\n        },\n        updateCurrentTime(componentContext) {\n            var currentTime = componentContext.currentLevel.soundObject.seek() || 0;\n        },\n        loadSound(componentContext) {\n            var data = {\n                methodsReference: this\n            };\n            \n            // Clear fade timer\n            if (componentContext.currentLevel.fadeTimer) {\n                clearTimout(componentContext.currentLevel.fadeTimer);\n            }\n\n            // Create sound object\n            Vue.set(componentContext.currentLevel, 'soundObject', new Howl({\n                src: './audio/'+ componentContext.currentLevel.filename + '.mp3',\n                volume: 1,\n\n                // Events\n                onplay: function () {\n                    data.methodsReference.updateCurrentTime(componentContext, componentContext.currentLevel.soundObject);\n                    componentContext.soundObjectRAF = requestAnimationFrame(updateProgress.bind(componentContext.currentLevel.soundObject));\n                },\n                onload: function () {\n                    Vue.set(componentContext.currentLevel, 'duration', componentContext.currentLevel.soundObject._duration);\n                    data.methodsReference.playBeat(componentContext);\n                },\n                onend: function () {\n                    cancelAnimationFrame(componentContext.soundObjectRAF);\n                    var nextIndex = componentContext.levels.findIndex(song => song._id === componentContext.currentLevel._id) + 1;\n                    if (nextIndex === componentContext.levels.length) {\n                        componentContext.endGame();\n                    } else {\n                        componentContext.currentLevel = componentContext.levels[nextIndex]; // Set next level\n                        componentContext.startLevel(); // Start level\n                    }\n                },\n                onpause: function () {\n                    cancelAnimationFrame(componentContext.soundObjectRAF);\n                },\n                onstop: function () {\n                    cancelAnimationFrame(componentContext.soundObjectRAF);\n                },\n                onseek: function () {\n                    data.methodsReference.updateCurrentTime(componentContext, componentContext.currentLevel.soundObject);\n                    componentContext.soundObjectRAF = requestAnimationFrame(updateProgress.bind(componentContext.currentLevel.soundObject));\n                }\n            }));\n\n            // Effects\n            // Create an analyser node in the Howler WebAudio context\n            var context = Howler.ctx;\n            const audioSourceNode = context.createBufferSource(componentContext.currentLevel.soundObject);\n            var analyser = context.createAnalyser();\n            analyser.fftSize = 1024;\n            const bufferLength = analyser.frequencyBinCount;\n\n            var dataArray;\n            var mode = 2;\n            if (mode === 1) {\n                dataArray = new Float32Array(analyser.fftSize);\n            } else {\n                dataArray = new Uint8Array(analyser.fftSize);\n            }\n\n            audioSourceNode.connect(analyser);\n            Howler.masterGain.connect(analyser);\n\n            // Get levels\n            function getLevels() {\n                var levelsHertz = [];\n                var levelsPerc = [];\n                var sectionSplit = 16;\n                var sections = bufferLength / sectionSplit;\n                if (mode === 1 || mode === 2) {\n                    var finalArray = dataArray;\n                    if (mode === 2) {\n                        finalArray = Float32Array.from(dataArray)\n                    }\n\n                    for (let sec = 0; sec < sections; sec++) {\n                        const minBin = (sec * sectionSplit);\n                        const maxBin = ((sec + 1) * sectionSplit);\n                        const numOfBins = maxBin - minBin;\n                        let binItems = 0;\n                        for (let i = minBin; i < maxBin; i++) {\n                            var calcNum = finalArray[i];\n                            if (mode === 2) {\n                                calcNum = (calcNum - 128) / 128;\n                            }\n\n                            binItems += calcNum ** 2;\n                        }\n                        const hertz = 10 * Math.log10(binItems / numOfBins);\n                        const perc = (100 + (hertz)).toFixed();\n                        levelsHertz.push(hertz);\n                        levelsPerc.push(perc);\n                    }\n                }\n\n                // Update levels\n                var levels = {\n                    'hertz': levelsHertz,\n                    'perc': levelsPerc\n                }\n                Vue.set(componentContext.audio, 'levels', levels);\n                return levels;\n            }\n            function detectLevel(options) {\n                var hertzTest = true;\n                var levels = getLevels();\n\n                if (options.mode === 'any') {\n                    if (options.aboveLevel) {\n                        var anyAbove = false;\n                        for (let levelIndex = options.aboveLevel; levelIndex < levels.hertz.length; levelIndex++) {\n                            if (levels.hertz[levelIndex] > (options.threshold)) { anyAbove = true }\n                        }\n                        if (options.excludeBelow) {\n                            for (let levelIndex = 0; levelIndex < options.excludeBelow; levelIndex++) {\n                                if (levels.hertz[levelIndex] > (options.threshold)) {\n                                    anyAbove = false\n                                }\n                            }\n                        }\n                        if (anyAbove === false) {\n                            hertzTest = false;\n                        }\n                    }\n                }\n                else {\n                    var numOfLevels = options.maxLevel - options.minLevel;\n                    var levelItems = 0;\n                    for (let levelIndex = options.minLevel; levelIndex < options.maxLevel; levelIndex++) {\n                        levelItems += levels.hertz[levelIndex];\n                    }\n                    const includeHertz = (levelItems / numOfLevels);\n                    var excludeHertz;\n                    if (options.minExclude) {\n                        var numOfExLevels = options.maxExclude - options.minExclude;\n                        var exLevelItems = 0;\n                        for (let exLevelIndex = options.minExclude; exLevelIndex < options.maxExclude; exLevelIndex++) {\n                            exLevelItems += levels.hertz[exLevelIndex];\n                        }\n                        excludeHertz = (exLevelItems / numOfExLevels);\n                    }\n\n                    if (includeHertz < (options.threshold)) { hertzTest = false }\n                    if (excludeHertz && excludeHertz > (options.exThreshold)) { hertzTest = false }\n                }\n                if (hertzTest === true) {\n                    Vue.set(componentContext.audio, options.name, true);\n                    const songTimer = options.name + 'Timer';\n                    if (componentContext.audio[songTimer]) {\n                        clearTimeout(componentContext.audio[songTimer]);\n                    }\n                    Vue.set(componentContext.audio, songTimer, setTimeout(function () {\n                        Vue.set(componentContext.audio, options.name, false);\n                        Vue.set(componentContext.audio, songTimer, \"\");\n                    }, options.release));\n\n                    // Bass steps\n                    if (options.bassSteps) {\n                        if (1 === 1 /*componentContext.currentLevel.bassSteps && componentContext.currentLevel.bassSteps.current !== false*/) {\n                            if (1 === 1 /*componentContext.bassSteps['trigger'] === true*/) {\n                                Vue.set(componentContext.audio.bassSteps, 'trigger', false); // Trigger off\n\n                                // Next step\n                                var newStep = componentContext.audio.bassSteps.current + 1 > options.bassSteps.count ? 0 :\n                                    componentContext.audio.bassSteps.current + 1;\n                                Vue.set(componentContext.audio.bassSteps, 'current', newStep);\n\n                                // Trigger timer\n                                Vue.set(componentContext.audio.bassSteps, 'timer', setTimeout(function () {\n                                    Vue.set(componentContext.audio.bassSteps, 'trigger', true); // Trigger on\n                                }, '100'));\n                            }\n                        } else {\n                            Vue.set(componentContext, 'audio.bassSteps.trigger', false); // Trigger off\n                            Vue.set(componentContext, 'audio.bassSteps', { 'current': 0 }); // Initial step\n\n                            // Trigger timer\n                            Vue.set(componentContext.audio.bassSteps, 'timer', setTimeout(function () {\n                                Vue.set(componentContext.audio.bassSteps, 'trigger', true); // Trigger on\n                            }, '87.5'));\n                        }\n                    }\n                }\n            }\n            var previousDelta = 0,\n                fpsLimit = 60;\n            function updateProgress(currentDelta) {\n                var object = this;\n                var delta = currentDelta - previousDelta;\n                if (fpsLimit && delta < 1000 / fpsLimit) {\n                    // Wait\n                } else {\n                    // If sound node exists in this moment\n                    if (object._sounds[0]) {\n                        data.methodsReference.updateCurrentTime(componentContext, object);\n\n                            // Frequency animate\n                            if (mode === 1) {\n                                analyser.getFloatTimeDomainData(dataArray)\n                            } else if (mode === 2) {\n                                analyser.getByteTimeDomainData(dataArray);\n                            }\n                            getLevels();\n\n                            // Deep Bass\n                            detectLevel({\n                                name: 'deepBass',\n                                minLevel: 1,\n                                maxLevel: 7,\n                                threshold: -5,\n                                release: 250,\n                                bassSteps: {\n                                    power: true,\n                                    count: 6\n                                }\n                            });\n\n                            // Crazy Bass\n                            detectLevel({\n                                name: 'crazyBass',\n                                minLevel: 1,\n                                maxLevel: 4,\n                                threshold: -3,\n                                release: 250\n                            });\n\n                            // Mid Bass\n                            detectLevel({\n                                name: 'midBass',\n                                minLevel: 5,\n                                maxLevel: 10,\n                                threshold: -10,\n                                release: 250\n                            });\n\n                            // Trebel\n                            detectLevel({\n                                name: 'treble',\n                                mode: 'any',\n                                aboveLevel: 25,\n                                threshold: -10,\n                                excludeBelow: 20,\n                                exThreshold: -40,\n                                release: 50\n                            });\n\n                    }\n                    previousDelta = currentDelta;\n                }\n                if (object.playing()) {\n                    componentContext.soundObjectRAF = requestAnimationFrame(updateProgress.bind(object));\n                }\n            }\n        }\n    }\n}"]}]}