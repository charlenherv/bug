{"remainingRequest":"/Users/hervey/Projects/Development/audiomarketplace/node_modules/babel-loader/lib/index.js!/Users/hervey/Projects/Development/audiomarketplace/node_modules/eslint-loader/index.js??ref--13-0!/Users/hervey/Projects/Development/audiomarketplace/src/store.js","dependencies":[{"path":"/Users/hervey/Projects/Development/audiomarketplace/src/store.js","mtime":1633441454906},{"path":"/Users/hervey/Projects/Development/audiomarketplace/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hervey/Projects/Development/audiomarketplace/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hervey/Projects/Development/audiomarketplace/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9oZXJ2ZXkvUHJvamVjdHMvRGV2ZWxvcG1lbnQvYXVkaW9tYXJrZXRwbGFjZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi9jb21wb25lbnRzL3BhZ2VzL3JvdXRlci5qcyc7CmltcG9ydCB7IGdldEF1dGgsIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCwgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQgfSBmcm9tICJmaXJlYmFzZS9hdXRoIjsKVnVlLnVzZShWdWV4KTsKVnVlLmNvbmZpZy5kZXZ0b29scyA9IHRydWU7CmV4cG9ydCBkZWZhdWx0IG5ldyBWdWV4LlN0b3JlKHsKICBzdGF0ZTogewogICAgY3VycmVudFVzZXI6IHsKICAgICAgcGxheWxpc3RzOiBbXQogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzZXRDdXJyZW50VXNlcjogZnVuY3Rpb24gc2V0Q3VycmVudFVzZXIoc3RhdGUsIG9iamVjdCkgewogICAgICBzdGF0ZS5jdXJyZW50VXNlciA9IG9iamVjdDsKICAgIH0sCiAgICB1cGRhdGVMaWtlczogZnVuY3Rpb24gdXBkYXRlTGlrZXMoc3RhdGUsIG9iamVjdCkgewogICAgICBzdGF0ZS5jdXJyZW50VXNlci5saWtlcyA9IG9iamVjdDsKICAgIH0sCiAgICB1cGRhdGVQbGF5bGlzdEl0ZW06IGZ1bmN0aW9uIHVwZGF0ZVBsYXlsaXN0SXRlbShzdGF0ZSwgbmV3T2JqZWN0KSB7CiAgICAgIHZhciBwbGF5bGlzdE9iaiA9IHN0YXRlLmN1cnJlbnRVc2VyLnBsYXlsaXN0cy5maWx0ZXIoZnVuY3Rpb24gKG9iaikgewogICAgICAgIHJldHVybiBvYmouX2lkID09PSBuZXdPYmplY3QuX2lkOwogICAgICB9KVswXTsKICAgICAgdmFyIHBsYXlsaXN0SW5kZXggPSBzdGF0ZS5jdXJyZW50VXNlci5wbGF5bGlzdHMuaW5kZXhPZihwbGF5bGlzdE9iaik7CiAgICAgIHN0YXRlLmN1cnJlbnRVc2VyLnBsYXlsaXN0c1twbGF5bGlzdEluZGV4XSA9IG5ld09iamVjdDsKICAgICAgY29uc29sZS5sb2coc3RhdGUuY3VycmVudFVzZXIucGxheWxpc3RzW3BsYXlsaXN0SW5kZXhdKTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8vIExvZ2luIGFuZCBzaWduIHVwCiAgICBsb2dpbkNyZWF0ZU9yVXBkYXRlOiBmdW5jdGlvbiBsb2dpbkNyZWF0ZU9yVXBkYXRlKF9yZWYsIHVzZXJEYXRhKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBkaXNwYXRjaCwgc3RhdGUsIGF1dGgsIGNyZWF0ZVVzZXIsIF9jcmVhdGVVc2VyOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NyZWF0ZVVzZXIgPSBmdW5jdGlvbiBfY3JlYXRlVXNlcjMoKSB7CiAgICAgICAgICAgICAgICAgIF9jcmVhdGVVc2VyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCB1c2VyRGF0YS5lbWFpbCwgdXNlckRhdGEucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHVzZXJDcmVkZW50aWFsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdjcmVhdGVVc2VyJywgdXNlckNyZWRlbnRpYWwudXNlci51aWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY3JlYXRlVXNlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBjcmVhdGVVc2VyID0gZnVuY3Rpb24gX2NyZWF0ZVVzZXIyKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2NyZWF0ZVVzZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLCBzdGF0ZSA9IF9yZWYuc3RhdGU7CiAgICAgICAgICAgICAgICBhdXRoID0gZ2V0QXV0aCgpOyAvLyBVcGRhdGUKCiAgICAgICAgICAgICAgICBpZiAoIShzdGF0ZS5jdXJyZW50VXNlci5zdGF0dXMgPT09ICdpbmFjdGl2ZScpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3VwZGF0ZVVzZXInLCB1c2VyRGF0YSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgdXNlckRhdGEuZW1haWwsIHVzZXJEYXRhLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uICh1c2VyQ3JlZGVudGlhbCkgewogICAgICAgICAgICAgICAgICBkaXNwYXRjaCgnZmV0Y2hDdXJyZW50VXNlcicsIHVzZXJDcmVkZW50aWFsLnVzZXIudWlkKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGVycm9yCiAgICAgICAgICAgICAgICAgIGNyZWF0ZVVzZXIoKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY3JlYXRlVXNlcjogZnVuY3Rpb24gY3JlYXRlVXNlcihfcmVmMiwgYXV0aElkKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBkaXNwYXRjaDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoJy9jcmVhdGVVc2VyJywge30sIHsKICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgYXV0aElkOiBhdXRoSWQKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3Byb2Nlc3NBbmRTZXRVc2VyJywgcmVzcG9uc2UuZGF0YS51c2VyRGF0YSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8gVXNlciBoYW5kbGluZwogICAgdXBkYXRlVXNlcjogZnVuY3Rpb24gdXBkYXRlVXNlcihfcmVmMywgdXNlckRhdGEpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoLCBzdGF0ZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaCwgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoJy91cGRhdGVVc2VyJywge30sIHsKICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBzdGF0ZS5jdXJyZW50VXNlci5faWQsCiAgICAgICAgICAgICAgICAgICAgcHJvZmlsZTogdXNlckRhdGEucHJvZmlsZQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBkaXNwYXRjaCgncHJvY2Vzc0FuZFNldFVzZXInLCByZXNwb25zZS5kYXRhLnVzZXJEYXRhKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBmZXRjaEN1cnJlbnRVc2VyOiBmdW5jdGlvbiBmZXRjaEN1cnJlbnRVc2VyKF9yZWY0LCBhdXRoSWQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoOwogICAgICAgICAgICAgICAgYXhpb3MuZ2V0KCcvZ2V0VXNlcicsIHsKICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgYXV0aElkOiBhdXRoSWQKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3Byb2Nlc3NBbmRTZXRVc2VyJywgcmVzcG9uc2UuZGF0YS51c2VyRGF0YSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcHJvY2Vzc0FuZFNldFVzZXI6IGZ1bmN0aW9uIHByb2Nlc3NBbmRTZXRVc2VyKF9yZWY1LCBkYXRhKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCBzdGF0ZSwgbW9kZSwgcHJvY2Vzc1Byb21pc2VzLCBwcm9taXNlLCBmaW5hbFVzZXJPYmplY3QsIHBsYXlsaXN0czsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjUuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWY1LmRpc3BhdGNoLCBzdGF0ZSA9IF9yZWY1LnN0YXRlOwogICAgICAgICAgICAgICAgbW9kZSA9IGRhdGEgPT09ICdyZWZyZXNoJyA/ICdyZWZyZXNoJyA6ICdkZWZhdWx0JzsKCiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3JlZnJlc2gnKSB7CiAgICAgICAgICAgICAgICAgIGF4aW9zLmdldCgnL2dldFVzZXInLCB7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHN0YXRlLmN1cnJlbnRVc2VyLl9pZAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaCgncHJvY2Vzc0FuZFNldFVzZXInLCByZXNwb25zZS5kYXRhLnVzZXJEYXRhKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBwcm9taXNlID0gZnVuY3Rpb24gX3Byb21pc2UoY2FsbGJhY2spIHsKICAgICAgICAgICAgICAgICAgICBwcm9jZXNzUHJvbWlzZXMucHVzaChuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgIHByb2Nlc3NQcm9taXNlcyA9IFtdOwogICAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICAgIGZpbmFsVXNlck9iamVjdCA9IGRhdGE7CiAgICAgICAgICAgICAgICAgIHBsYXlsaXN0cyA9IGZpbmFsVXNlck9iamVjdC5wbGF5bGlzdHM7IC8vIFBsYXlsaXN0cwoKICAgICAgICAgICAgICAgICAgaWYgKHBsYXlsaXN0cykgewogICAgICAgICAgICAgICAgICAgIHByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICAgICAgYXhpb3MuZ2V0KCcvZ2V0UGxheWxpc3RzJywgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5bGlzdHM6IHBsYXlsaXN0cwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWxpc3RzID0gcmVzcG9uc2UuZGF0YS5wbGF5bGlzdHMgfHwgW107CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsVXNlck9iamVjdC5wbGF5bGlzdHMgPSBwbGF5bGlzdHM7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChwcm9jZXNzUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKHZhbHVlcykgewogICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0Q3VycmVudFVzZXInLCBmaW5hbFVzZXJPYmplY3QpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8gUHJvZmlsZSBDb250ZW50CiAgICB1cGRhdGVMaWtlOiBmdW5jdGlvbiB1cGRhdGVMaWtlKF9yZWY2LCBvcHRpb25zKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHZhciBjb21taXQsIHN0YXRlLCBjdXJyZW50TGlrZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY2LmNvbW1pdCwgc3RhdGUgPSBfcmVmNi5zdGF0ZTsKICAgICAgICAgICAgICAgIGN1cnJlbnRMaWtlcyA9IHN0YXRlLmN1cnJlbnRVc2VyLmxpa2VzIHx8IFtdOwoKICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmxpa2VPclVubGlrZSA9PT0gJ2xpa2UnKSB7CiAgICAgICAgICAgICAgICAgIC8vIEFkZCBsaWtlCiAgICAgICAgICAgICAgICAgIGN1cnJlbnRMaWtlcy5wdXNoKG9wdGlvbnMuc291bmRJZCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbGlrZQogICAgICAgICAgICAgICAgICBjdXJyZW50TGlrZXMgPSBjdXJyZW50TGlrZXMuZmlsdGVyKGZ1bmN0aW9uICh2LCBpLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYgIT09IG9wdGlvbnMuc291bmRJZDsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29tbWl0KCd1cGRhdGVMaWtlcycsIGN1cnJlbnRMaWtlcyk7IC8vIFVwZGF0ZSBpbiBzdGF0ZQogICAgICAgICAgICAgICAgLy8gVXBkYXRlIGluIGRhdGFiYXNlCgogICAgICAgICAgICAgICAgYXhpb3MucG9zdCgnL3VwZGF0ZUxpa2UnLCB7fSwgewogICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHN0YXRlLmN1cnJlbnRVc2VyLl9pZCwKICAgICAgICAgICAgICAgICAgICBzb3VuZElkOiBvcHRpb25zLnNvdW5kSWQsCiAgICAgICAgICAgICAgICAgICAgbGlrZU9yVW5saWtlOiBvcHRpb25zLmxpa2VPclVubGlrZQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdXBkYXRlUGxheWxpc3RJdGVtOiBmdW5jdGlvbiB1cGRhdGVQbGF5bGlzdEl0ZW0oX3JlZjcsIG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgc3RhdGU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY3LmNvbW1pdCwgc3RhdGUgPSBfcmVmNy5zdGF0ZTsKICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoJy91cGRhdGVQbGF5bGlzdEl0ZW0nLCB7fSwgewogICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHN0YXRlLmN1cnJlbnRVc2VyLl9pZCwKICAgICAgICAgICAgICAgICAgICBzb3VuZElkOiBvcHRpb25zLnNvdW5kSWQsCiAgICAgICAgICAgICAgICAgICAgcGxheWxpc3RJZDogb3B0aW9ucy5wbGF5bGlzdElkCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgndXBkYXRlUGxheWxpc3RJdGVtJywgcmVzcG9uc2UuZGF0YS5wbGF5bGlzdERhdGEpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICA7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNyZWF0ZVBsYXlsaXN0OiBmdW5jdGlvbiBjcmVhdGVQbGF5bGlzdChfcmVmOCwgb3B0aW9ucykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICB2YXIgZGlzcGF0Y2gsIHN0YXRlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWY4LmRpc3BhdGNoLCBzdGF0ZSA9IF9yZWY4LnN0YXRlOwogICAgICAgICAgICAgICAgYXhpb3MucG9zdCgnL2NyZWF0ZVBsYXlsaXN0Jywge30sIHsKICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBzdGF0ZS5jdXJyZW50VXNlci5faWQsCiAgICAgICAgICAgICAgICAgICAgc291bmRJZDogb3B0aW9ucy5zb3VuZElkLAogICAgICAgICAgICAgICAgICAgIHBsYXlsaXN0VGl0bGU6IG9wdGlvbnMucGxheWxpc3RUaXRsZQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBkaXNwYXRjaCgncHJvY2Vzc0FuZFNldFVzZXInLCAncmVmcmVzaCcpOwoKICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2FsbGJhY2spIHsKICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn0pOw=="},{"version":3,"sources":["/Users/hervey/Projects/Development/audiomarketplace/src/store.js"],"names":["Vue","Vuex","axios","router","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","use","config","devtools","Store","state","currentUser","playlists","mutations","setCurrentUser","object","updateLikes","likes","updatePlaylistItem","newObject","playlistObj","filter","obj","_id","playlistIndex","indexOf","console","log","actions","loginCreateOrUpdate","userData","createUser","auth","email","password","then","userCredential","dispatch","user","uid","status","catch","authId","post","params","response","data","updateUser","userId","profile","fetchCurrentUser","get","processAndSetUser","promise","commit","mode","callback","processPromises","push","Promise","resolve","reject","finalUserObject","all","values","updateLike","options","currentLikes","likeOrUnlike","soundId","v","i","a","playlistId","playlistData","createPlaylist","playlistTitle"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from \"axios\";\nimport router from './components/pages/router.js'\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\n\nVue.use(Vuex)\nVue.config.devtools = true\n\nexport default new Vuex.Store({\n  state: {\n    currentUser: {\n      playlists: []\n    }\n  },\n  mutations: {\n    setCurrentUser(state, object) {\n      state.currentUser = object\n    },\n    updateLikes(state, object) {\n      state.currentUser.likes = object\n    },\n    updatePlaylistItem(state, newObject) {\n      var playlistObj = state.currentUser.playlists.filter(obj => obj._id === newObject._id)[0];\n      const playlistIndex = state.currentUser.playlists.indexOf(playlistObj);\n      state.currentUser.playlists[playlistIndex] = newObject;\n      console.log(state.currentUser.playlists[playlistIndex]);\n    }\n  },\n  actions: {\n\n      // Login and sign up\n      async loginCreateOrUpdate({ dispatch, state }, userData) {\n        const auth = getAuth();\n\n        // Update\n        if (state.currentUser.status === 'inactive') {\n          dispatch('updateUser', userData);\n        } else {\n\n          // Sign In\n          await signInWithEmailAndPassword(auth, userData.email, userData.password)\n          .then((userCredential) => {\n              dispatch('fetchCurrentUser', userCredential.user.uid)\n          })\n          .catch(() => {\n              // Check for error\n              createUser();\n          });\n        }\n\n        // Create\n        async function createUser() {\n          // Check if because exists already, then\n          await createUserWithEmailAndPassword(auth, userData.email, userData.password)\n          .then((userCredential) => {\n                dispatch('createUser', userCredential.user.uid)\n          })\n        }\n      },\n      async createUser({ dispatch }, authId) {\n        axios\n          .post('/createUser', {}, { params: { authId: authId } })\n          .then(response => {\n            dispatch('processAndSetUser', response.data.userData)\n          });\n      },\n\n      // User handling\n      async updateUser({ dispatch, state }, userData) {\n        axios\n          .post('/updateUser', {}, { params: \n            { \n              userId: state.currentUser._id,\n              profile: userData.profile\n            } \n          })\n          .then(response => {\n            dispatch('processAndSetUser', response.data.userData);            \n          });\n      },\n      async fetchCurrentUser({ dispatch }, authId) {\n        axios\n          .get('/getUser', { params: { authId: authId } })\n          .then(response => {\n            dispatch('processAndSetUser', response.data.userData)\n          });\n      },\n      async processAndSetUser({ commit, dispatch, state}, data) {\n        const mode = data === 'refresh' ? 'refresh': 'default';\n        if (mode === 'refresh') {\n          axios\n          .get('/getUser', { params: { userId: state.currentUser._id } })\n          .then(response => {\n              dispatch('processAndSetUser', response.data.userData);\n          });\n        } else {\n          let processPromises = [];\n          function promise(callback) {\n            processPromises.push(\n                new Promise(function(resolve, reject){\n                    callback(resolve, reject);\n                })\n            );    \n          };\n          let finalUserObject = data;\n          let playlists = finalUserObject.playlists;\n          // Playlists\n          if (playlists) {\n            promise(function(resolve,reject){\n              axios.get('/getPlaylists', { params: { playlists: playlists } }).then(response => {\n                const playlists = response.data.playlists || [];\n                finalUserObject.playlists = playlists;\n                resolve();\n              });\n            });           \n          }        \n          Promise.all(processPromises).then(values => {\n            commit('setCurrentUser', finalUserObject);\n          });\n        }     \n      },\n      \n      // Profile Content\n      async updateLike({commit, state}, options) {\n        var currentLikes = state.currentUser.likes || [];\n        if (options.likeOrUnlike === 'like') { // Add like\n          currentLikes.push(options.soundId);\n        } else { // Remove like\n          currentLikes = currentLikes.filter(function(v, i, a){ \n            return v !== options.soundId;\n          });\n        }\n        commit('updateLikes', currentLikes) // Update in state\n        \n        // Update in database\n        axios.post('/updateLike', {}, { params: { \n          userId: state.currentUser._id,\n          soundId: options.soundId,\n          likeOrUnlike: options.likeOrUnlike \n        }});\n      },\n      async updatePlaylistItem({commit, state}, options) {\n        axios.post('/updatePlaylistItem', {}, { params: { \n          userId: state.currentUser._id,\n          soundId: options.soundId,\n          playlistId: options.playlistId \n        }})\n        .then(response => {\n          commit('updatePlaylistItem', response.data.playlistData)\n        });;\n      },\n      async createPlaylist({dispatch, state}, options) {\n        axios.post('/createPlaylist', {}, { params: { \n          userId: state.currentUser._id,\n          soundId: options.soundId,\n          playlistTitle: options.playlistTitle \n        }})\n        .then(response => {\n          dispatch('processAndSetUser', 'refresh');\n          if (options.callback) {\n            options.callback();\n          }\n        });;\n      }\n  }\n})"]}]}