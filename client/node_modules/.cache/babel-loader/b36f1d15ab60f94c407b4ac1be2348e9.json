{"remainingRequest":"/Users/hervey/Projects/Development/bug/node_modules/babel-loader/lib/index.js!/Users/hervey/Projects/Development/bug/node_modules/eslint-loader/index.js??ref--13-0!/Users/hervey/Projects/Development/bug/src/mixins/AudioFunctions.js","dependencies":[{"path":"/Users/hervey/Projects/Development/bug/src/mixins/AudioFunctions.js","mtime":1638382012527},{"path":"/Users/hervey/Projects/Development/bug/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hervey/Projects/Development/bug/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hervey/Projects/Development/bug/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXRoLmxvZzEwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZsb2F0MzItYXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS51aW50OC1hcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmNvcHktd2l0aGluIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZXZlcnkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWxsIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZyb20iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubGFzdC1pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS1yaWdodCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJldmVyc2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb3J0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc3ViYXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1sb2NhbGUtc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tc3RyaW5nIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBIb3dsLCBIb3dsZXIgfSBmcm9tICdob3dsZXInOwpleHBvcnQgdmFyIEF1ZGlvRnVuY3Rpb25zID0gewogIG1ldGhvZHM6IHsKICAgIHBsYXlCZWF0OiBmdW5jdGlvbiBwbGF5QmVhdChjb21wb25lbnRDb250ZXh0KSB7CiAgICAgIEhvd2xlci5zdG9wKCk7CiAgICAgIHZhciBtZXRob2RzUmVmZXJlbmNlID0gdGhpczsKCiAgICAgIGlmIChjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5zb3VuZE9iamVjdCkgewogICAgICAgIGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLnNvdW5kT2JqZWN0LnZvbHVtZSgxKTsKICAgICAgICBjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5zb3VuZE9iamVjdC5wbGF5KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWV0aG9kc1JlZmVyZW5jZS5sb2FkU291bmQoY29tcG9uZW50Q29udGV4dCk7CiAgICAgIH0KICAgIH0sCiAgICBzdG9wU291bmQ6IGZ1bmN0aW9uIHN0b3BTb3VuZChjb21wb25lbnRDb250ZXh0KSB7CiAgICAgIC8vIEZhZGUgb3V0IHRoZW4gc3RvcAogICAgICB2YXIgZmFkZU91dFRpbWUgPSA1MDA7CiAgICAgIGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLnNvdW5kT2JqZWN0LmZhZGUoMSwgMCwgNTAwKTsKICAgICAgY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwuZmFkZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwuc291bmRPYmplY3Quc3RvcCgpOwogICAgICB9LCBmYWRlT3V0VGltZSk7CiAgICB9LAogICAgcGF1c2VTb3VuZDogZnVuY3Rpb24gcGF1c2VTb3VuZChjb21wb25lbnRDb250ZXh0KSB7CiAgICAgIGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLnNvdW5kT2JqZWN0LnBsYXkoKTsKICAgIH0sCiAgICB1cGRhdGVDdXJyZW50VGltZTogZnVuY3Rpb24gdXBkYXRlQ3VycmVudFRpbWUoY29tcG9uZW50Q29udGV4dCkgewogICAgICB2YXIgY3VycmVudFRpbWUgPSBjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5zb3VuZE9iamVjdC5zZWVrKCkgfHwgMDsKICAgIH0sCiAgICBsb2FkU291bmQ6IGZ1bmN0aW9uIGxvYWRTb3VuZChjb21wb25lbnRDb250ZXh0KSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIG1ldGhvZHNSZWZlcmVuY2U6IHRoaXMKICAgICAgfTsgLy8gQ2xlYXIgZmFkZSB0aW1lcgoKICAgICAgaWYgKGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLmZhZGVUaW1lcikgewogICAgICAgIGNsZWFyVGltb3V0KGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLmZhZGVUaW1lcik7CiAgICAgIH0gLy8gQ3JlYXRlIHNvdW5kIG9iamVjdAoKCiAgICAgIFZ1ZS5zZXQoY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwsICdzb3VuZE9iamVjdCcsIG5ldyBIb3dsKHsKICAgICAgICBzcmM6ICcuL2F1ZGlvLycgKyBjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5maWxlbmFtZSArICcubXAzJywKICAgICAgICB2b2x1bWU6IDEsCiAgICAgICAgLy8gRXZlbnRzCiAgICAgICAgb25wbGF5OiBmdW5jdGlvbiBvbnBsYXkoKSB7CiAgICAgICAgICBkYXRhLm1ldGhvZHNSZWZlcmVuY2UudXBkYXRlQ3VycmVudFRpbWUoY29tcG9uZW50Q29udGV4dCwgY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwuc291bmRPYmplY3QpOwogICAgICAgICAgY29tcG9uZW50Q29udGV4dC5zb3VuZE9iamVjdFJBRiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGVQcm9ncmVzcy5iaW5kKGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLnNvdW5kT2JqZWN0KSk7CiAgICAgICAgfSwKICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIG9ubG9hZCgpIHsKICAgICAgICAgIFZ1ZS5zZXQoY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwsICdkdXJhdGlvbicsIGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLnNvdW5kT2JqZWN0Ll9kdXJhdGlvbik7CiAgICAgICAgICBkYXRhLm1ldGhvZHNSZWZlcmVuY2UucGxheUJlYXQoY29tcG9uZW50Q29udGV4dCk7CiAgICAgICAgfSwKICAgICAgICBvbmVuZDogZnVuY3Rpb24gb25lbmQoKSB7CiAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShjb21wb25lbnRDb250ZXh0LnNvdW5kT2JqZWN0UkFGKTsKICAgICAgICAgIHZhciBuZXh0SW5kZXggPSBjb21wb25lbnRDb250ZXh0LmxldmVscy5maW5kSW5kZXgoZnVuY3Rpb24gKHNvbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHNvbmcuX2lkID09PSBjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5faWQ7CiAgICAgICAgICB9KSArIDE7CgogICAgICAgICAgaWYgKG5leHRJbmRleCA9PT0gY29tcG9uZW50Q29udGV4dC5sZXZlbHMubGVuZ3RoKSB7CiAgICAgICAgICAgIGNvbXBvbmVudENvbnRleHQuZW5kR2FtZSgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwgPSBjb21wb25lbnRDb250ZXh0LmxldmVsc1tuZXh0SW5kZXhdOwogICAgICAgICAgICBkYXRhLm1ldGhvZHNSZWZlcmVuY2UucGxheUJlYXQoY29tcG9uZW50Q29udGV4dCk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBvbnBhdXNlOiBmdW5jdGlvbiBvbnBhdXNlKCkgewogICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoY29tcG9uZW50Q29udGV4dC5zb3VuZE9iamVjdFJBRik7CiAgICAgICAgfSwKICAgICAgICBvbnN0b3A6IGZ1bmN0aW9uIG9uc3RvcCgpIHsKICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGNvbXBvbmVudENvbnRleHQuc291bmRPYmplY3RSQUYpOwogICAgICAgIH0sCiAgICAgICAgb25zZWVrOiBmdW5jdGlvbiBvbnNlZWsoKSB7CiAgICAgICAgICBkYXRhLm1ldGhvZHNSZWZlcmVuY2UudXBkYXRlQ3VycmVudFRpbWUoY29tcG9uZW50Q29udGV4dCwgY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwuc291bmRPYmplY3QpOwogICAgICAgICAgY29tcG9uZW50Q29udGV4dC5zb3VuZE9iamVjdFJBRiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGVQcm9ncmVzcy5iaW5kKGNvbXBvbmVudENvbnRleHQuY3VycmVudExldmVsLnNvdW5kT2JqZWN0KSk7CiAgICAgICAgfQogICAgICB9KSk7IC8vIEVmZmVjdHMKICAgICAgLy8gQ3JlYXRlIGFuIGFuYWx5c2VyIG5vZGUgaW4gdGhlIEhvd2xlciBXZWJBdWRpbyBjb250ZXh0CgogICAgICB2YXIgY29udGV4dCA9IEhvd2xlci5jdHg7CiAgICAgIHZhciBhdWRpb1NvdXJjZU5vZGUgPSBjb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZShjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5zb3VuZE9iamVjdCk7CiAgICAgIHZhciBhbmFseXNlciA9IGNvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTsKICAgICAgYW5hbHlzZXIuZmZ0U2l6ZSA9IDEwMjQ7CiAgICAgIHZhciBidWZmZXJMZW5ndGggPSBhbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudDsKICAgICAgdmFyIGRhdGFBcnJheTsKICAgICAgdmFyIG1vZGUgPSAyOwoKICAgICAgaWYgKG1vZGUgPT09IDEpIHsKICAgICAgICBkYXRhQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KGFuYWx5c2VyLmZmdFNpemUpOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGFBcnJheSA9IG5ldyBVaW50OEFycmF5KGFuYWx5c2VyLmZmdFNpemUpOwogICAgICB9CgogICAgICBhdWRpb1NvdXJjZU5vZGUuY29ubmVjdChhbmFseXNlcik7CiAgICAgIEhvd2xlci5tYXN0ZXJHYWluLmNvbm5lY3QoYW5hbHlzZXIpOyAvLyBHZXQgbGV2ZWxzCgogICAgICBmdW5jdGlvbiBnZXRMZXZlbHMoKSB7CiAgICAgICAgdmFyIGxldmVsc0hlcnR6ID0gW107CiAgICAgICAgdmFyIGxldmVsc1BlcmMgPSBbXTsKICAgICAgICB2YXIgc2VjdGlvblNwbGl0ID0gMTY7CiAgICAgICAgdmFyIHNlY3Rpb25zID0gYnVmZmVyTGVuZ3RoIC8gc2VjdGlvblNwbGl0OwoKICAgICAgICBpZiAobW9kZSA9PT0gMSB8fCBtb2RlID09PSAyKSB7CiAgICAgICAgICB2YXIgZmluYWxBcnJheSA9IGRhdGFBcnJheTsKCiAgICAgICAgICBpZiAobW9kZSA9PT0gMikgewogICAgICAgICAgICBmaW5hbEFycmF5ID0gRmxvYXQzMkFycmF5LmZyb20oZGF0YUFycmF5KTsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKHZhciBzZWMgPSAwOyBzZWMgPCBzZWN0aW9uczsgc2VjKyspIHsKICAgICAgICAgICAgdmFyIG1pbkJpbiA9IHNlYyAqIHNlY3Rpb25TcGxpdDsKICAgICAgICAgICAgdmFyIG1heEJpbiA9IChzZWMgKyAxKSAqIHNlY3Rpb25TcGxpdDsKICAgICAgICAgICAgdmFyIG51bU9mQmlucyA9IG1heEJpbiAtIG1pbkJpbjsKICAgICAgICAgICAgdmFyIGJpbkl0ZW1zID0gMDsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSBtaW5CaW47IGkgPCBtYXhCaW47IGkrKykgewogICAgICAgICAgICAgIHZhciBjYWxjTnVtID0gZmluYWxBcnJheVtpXTsKCiAgICAgICAgICAgICAgaWYgKG1vZGUgPT09IDIpIHsKICAgICAgICAgICAgICAgIGNhbGNOdW0gPSAoY2FsY051bSAtIDEyOCkgLyAxMjg7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBiaW5JdGVtcyArPSBNYXRoLnBvdyhjYWxjTnVtLCAyKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGhlcnR6ID0gMTAgKiBNYXRoLmxvZzEwKGJpbkl0ZW1zIC8gbnVtT2ZCaW5zKTsKICAgICAgICAgICAgdmFyIHBlcmMgPSAoMTAwICsgaGVydHopLnRvRml4ZWQoKTsKICAgICAgICAgICAgbGV2ZWxzSGVydHoucHVzaChoZXJ0eik7CiAgICAgICAgICAgIGxldmVsc1BlcmMucHVzaChwZXJjKTsKICAgICAgICAgIH0KICAgICAgICB9IC8vIFVwZGF0ZSBsZXZlbHMKCgogICAgICAgIHZhciBsZXZlbHMgPSB7CiAgICAgICAgICAnaGVydHonOiBsZXZlbHNIZXJ0eiwKICAgICAgICAgICdwZXJjJzogbGV2ZWxzUGVyYwogICAgICAgIH07CiAgICAgICAgVnVlLnNldChjb21wb25lbnRDb250ZXh0LmF1ZGlvLCAnbGV2ZWxzJywgbGV2ZWxzKTsKICAgICAgICByZXR1cm4gbGV2ZWxzOwogICAgICB9CgogICAgICBmdW5jdGlvbiBkZXRlY3RMZXZlbChvcHRpb25zKSB7CiAgICAgICAgdmFyIGhlcnR6VGVzdCA9IHRydWU7CiAgICAgICAgdmFyIGxldmVscyA9IGdldExldmVscygpOwoKICAgICAgICBpZiAob3B0aW9ucy5tb2RlID09PSAnYW55JykgewogICAgICAgICAgaWYgKG9wdGlvbnMuYWJvdmVMZXZlbCkgewogICAgICAgICAgICB2YXIgYW55QWJvdmUgPSBmYWxzZTsKCiAgICAgICAgICAgIGZvciAodmFyIGxldmVsSW5kZXggPSBvcHRpb25zLmFib3ZlTGV2ZWw7IGxldmVsSW5kZXggPCBsZXZlbHMuaGVydHoubGVuZ3RoOyBsZXZlbEluZGV4KyspIHsKICAgICAgICAgICAgICBpZiAobGV2ZWxzLmhlcnR6W2xldmVsSW5kZXhdID4gb3B0aW9ucy50aHJlc2hvbGQpIHsKICAgICAgICAgICAgICAgIGFueUFib3ZlID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChvcHRpb25zLmV4Y2x1ZGVCZWxvdykgewogICAgICAgICAgICAgIGZvciAodmFyIF9sZXZlbEluZGV4ID0gMDsgX2xldmVsSW5kZXggPCBvcHRpb25zLmV4Y2x1ZGVCZWxvdzsgX2xldmVsSW5kZXgrKykgewogICAgICAgICAgICAgICAgaWYgKGxldmVscy5oZXJ0eltfbGV2ZWxJbmRleF0gPiBvcHRpb25zLnRocmVzaG9sZCkgewogICAgICAgICAgICAgICAgICBhbnlBYm92ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGFueUFib3ZlID09PSBmYWxzZSkgewogICAgICAgICAgICAgIGhlcnR6VGVzdCA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBudW1PZkxldmVscyA9IG9wdGlvbnMubWF4TGV2ZWwgLSBvcHRpb25zLm1pbkxldmVsOwogICAgICAgICAgdmFyIGxldmVsSXRlbXMgPSAwOwoKICAgICAgICAgIGZvciAodmFyIF9sZXZlbEluZGV4MiA9IG9wdGlvbnMubWluTGV2ZWw7IF9sZXZlbEluZGV4MiA8IG9wdGlvbnMubWF4TGV2ZWw7IF9sZXZlbEluZGV4MisrKSB7CiAgICAgICAgICAgIGxldmVsSXRlbXMgKz0gbGV2ZWxzLmhlcnR6W19sZXZlbEluZGV4Ml07CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGluY2x1ZGVIZXJ0eiA9IGxldmVsSXRlbXMgLyBudW1PZkxldmVsczsKICAgICAgICAgIHZhciBleGNsdWRlSGVydHo7CgogICAgICAgICAgaWYgKG9wdGlvbnMubWluRXhjbHVkZSkgewogICAgICAgICAgICB2YXIgbnVtT2ZFeExldmVscyA9IG9wdGlvbnMubWF4RXhjbHVkZSAtIG9wdGlvbnMubWluRXhjbHVkZTsKICAgICAgICAgICAgdmFyIGV4TGV2ZWxJdGVtcyA9IDA7CgogICAgICAgICAgICBmb3IgKHZhciBleExldmVsSW5kZXggPSBvcHRpb25zLm1pbkV4Y2x1ZGU7IGV4TGV2ZWxJbmRleCA8IG9wdGlvbnMubWF4RXhjbHVkZTsgZXhMZXZlbEluZGV4KyspIHsKICAgICAgICAgICAgICBleExldmVsSXRlbXMgKz0gbGV2ZWxzLmhlcnR6W2V4TGV2ZWxJbmRleF07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGV4Y2x1ZGVIZXJ0eiA9IGV4TGV2ZWxJdGVtcyAvIG51bU9mRXhMZXZlbHM7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGluY2x1ZGVIZXJ0eiA8IG9wdGlvbnMudGhyZXNob2xkKSB7CiAgICAgICAgICAgIGhlcnR6VGVzdCA9IGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChleGNsdWRlSGVydHogJiYgZXhjbHVkZUhlcnR6ID4gb3B0aW9ucy5leFRocmVzaG9sZCkgewogICAgICAgICAgICBoZXJ0elRlc3QgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChoZXJ0elRlc3QgPT09IHRydWUpIHsKICAgICAgICAgIFZ1ZS5zZXQoY29tcG9uZW50Q29udGV4dC5hdWRpbywgb3B0aW9ucy5uYW1lLCB0cnVlKTsKICAgICAgICAgIHZhciBzb25nVGltZXIgPSBvcHRpb25zLm5hbWUgKyAnVGltZXInOwoKICAgICAgICAgIGlmIChjb21wb25lbnRDb250ZXh0LmF1ZGlvW3NvbmdUaW1lcl0pIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbXBvbmVudENvbnRleHQuYXVkaW9bc29uZ1RpbWVyXSk7CiAgICAgICAgICB9CgogICAgICAgICAgVnVlLnNldChjb21wb25lbnRDb250ZXh0LmF1ZGlvLCBzb25nVGltZXIsIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBWdWUuc2V0KGNvbXBvbmVudENvbnRleHQuYXVkaW8sIG9wdGlvbnMubmFtZSwgZmFsc2UpOwogICAgICAgICAgICBWdWUuc2V0KGNvbXBvbmVudENvbnRleHQuYXVkaW8sIHNvbmdUaW1lciwgIiIpOwogICAgICAgICAgfSwgb3B0aW9ucy5yZWxlYXNlKSk7IC8vIEJhc3Mgc3RlcHMKCiAgICAgICAgICBpZiAob3B0aW9ucy5iYXNzU3RlcHMpIHsKICAgICAgICAgICAgaWYgKDEgPT09IDEKICAgICAgICAgICAgLypjb21wb25lbnRDb250ZXh0LmN1cnJlbnRMZXZlbC5iYXNzU3RlcHMgJiYgY29tcG9uZW50Q29udGV4dC5jdXJyZW50TGV2ZWwuYmFzc1N0ZXBzLmN1cnJlbnQgIT09IGZhbHNlKi8KICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBpZiAoMSA9PT0gMQogICAgICAgICAgICAgICAgLypjb21wb25lbnRDb250ZXh0LmJhc3NTdGVwc1sndHJpZ2dlciddID09PSB0cnVlKi8KICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQoY29tcG9uZW50Q29udGV4dC5hdWRpby5iYXNzU3RlcHMsICd0cmlnZ2VyJywgZmFsc2UpOyAvLyBUcmlnZ2VyIG9mZgogICAgICAgICAgICAgICAgICAgIC8vIE5leHQgc3RlcAoKICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U3RlcCA9IGNvbXBvbmVudENvbnRleHQuYXVkaW8uYmFzc1N0ZXBzLmN1cnJlbnQgKyAxID4gb3B0aW9ucy5iYXNzU3RlcHMuY291bnQgPyAwIDogY29tcG9uZW50Q29udGV4dC5hdWRpby5iYXNzU3RlcHMuY3VycmVudCArIDE7CiAgICAgICAgICAgICAgICAgICAgVnVlLnNldChjb21wb25lbnRDb250ZXh0LmF1ZGlvLmJhc3NTdGVwcywgJ2N1cnJlbnQnLCBuZXdTdGVwKTsgLy8gVHJpZ2dlciB0aW1lcgoKICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KGNvbXBvbmVudENvbnRleHQuYXVkaW8uYmFzc1N0ZXBzLCAndGltZXInLCBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQoY29tcG9uZW50Q29udGV4dC5hdWRpby5iYXNzU3RlcHMsICd0cmlnZ2VyJywgdHJ1ZSk7IC8vIFRyaWdnZXIgb24KICAgICAgICAgICAgICAgICAgICB9LCAnMTAwJykpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBWdWUuc2V0KGNvbXBvbmVudENvbnRleHQsICdhdWRpby5iYXNzU3RlcHMudHJpZ2dlcicsIGZhbHNlKTsgLy8gVHJpZ2dlciBvZmYKCiAgICAgICAgICAgICAgVnVlLnNldChjb21wb25lbnRDb250ZXh0LCAnYXVkaW8uYmFzc1N0ZXBzJywgewogICAgICAgICAgICAgICAgJ2N1cnJlbnQnOiAwCiAgICAgICAgICAgICAgfSk7IC8vIEluaXRpYWwgc3RlcAogICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGltZXIKCiAgICAgICAgICAgICAgVnVlLnNldChjb21wb25lbnRDb250ZXh0LmF1ZGlvLmJhc3NTdGVwcywgJ3RpbWVyJywgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBWdWUuc2V0KGNvbXBvbmVudENvbnRleHQuYXVkaW8uYmFzc1N0ZXBzLCAndHJpZ2dlcicsIHRydWUpOyAvLyBUcmlnZ2VyIG9uCiAgICAgICAgICAgICAgfSwgJzg3LjUnKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBwcmV2aW91c0RlbHRhID0gMCwKICAgICAgICAgIGZwc0xpbWl0ID0gNjA7CgogICAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcyhjdXJyZW50RGVsdGEpIHsKICAgICAgICB2YXIgb2JqZWN0ID0gdGhpczsKICAgICAgICB2YXIgZGVsdGEgPSBjdXJyZW50RGVsdGEgLSBwcmV2aW91c0RlbHRhOwoKICAgICAgICBpZiAoZnBzTGltaXQgJiYgZGVsdGEgPCAxMDAwIC8gZnBzTGltaXQpIHsvLyBXYWl0CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIElmIHNvdW5kIG5vZGUgZXhpc3RzIGluIHRoaXMgbW9tZW50CiAgICAgICAgICBpZiAob2JqZWN0Ll9zb3VuZHNbMF0pIHsKICAgICAgICAgICAgZGF0YS5tZXRob2RzUmVmZXJlbmNlLnVwZGF0ZUN1cnJlbnRUaW1lKGNvbXBvbmVudENvbnRleHQsIG9iamVjdCk7IC8vIEZyZXF1ZW5jeSBhbmltYXRlCgogICAgICAgICAgICBpZiAobW9kZSA9PT0gMSkgewogICAgICAgICAgICAgIGFuYWx5c2VyLmdldEZsb2F0VGltZURvbWFpbkRhdGEoZGF0YUFycmF5KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSAyKSB7CiAgICAgICAgICAgICAgYW5hbHlzZXIuZ2V0Qnl0ZVRpbWVEb21haW5EYXRhKGRhdGFBcnJheSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGdldExldmVscygpOyAvLyBEZWVwIEJhc3MKCiAgICAgICAgICAgIGRldGVjdExldmVsKHsKICAgICAgICAgICAgICBuYW1lOiAnZGVlcEJhc3MnLAogICAgICAgICAgICAgIG1pbkxldmVsOiAxLAogICAgICAgICAgICAgIG1heExldmVsOiA3LAogICAgICAgICAgICAgIHRocmVzaG9sZDogLTUsCiAgICAgICAgICAgICAgcmVsZWFzZTogMjUwLAogICAgICAgICAgICAgIGJhc3NTdGVwczogewogICAgICAgICAgICAgICAgcG93ZXI6IHRydWUsCiAgICAgICAgICAgICAgICBjb3VudDogNgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7IC8vIENyYXp5IEJhc3MKCiAgICAgICAgICAgIGRldGVjdExldmVsKHsKICAgICAgICAgICAgICBuYW1lOiAnY3JhenlCYXNzJywKICAgICAgICAgICAgICBtaW5MZXZlbDogMSwKICAgICAgICAgICAgICBtYXhMZXZlbDogNCwKICAgICAgICAgICAgICB0aHJlc2hvbGQ6IC0xLAogICAgICAgICAgICAgIHJlbGVhc2U6IDI1MAogICAgICAgICAgICB9KTsgLy8gTWlkIEJhc3MKCiAgICAgICAgICAgIGRldGVjdExldmVsKHsKICAgICAgICAgICAgICBuYW1lOiAnbWlkQmFzcycsCiAgICAgICAgICAgICAgbWluTGV2ZWw6IDUsCiAgICAgICAgICAgICAgbWF4TGV2ZWw6IDEwLAogICAgICAgICAgICAgIHRocmVzaG9sZDogLTEwLAogICAgICAgICAgICAgIHJlbGVhc2U6IDI1MAogICAgICAgICAgICB9KTsgLy8gVHJlYmVsCgogICAgICAgICAgICBkZXRlY3RMZXZlbCh7CiAgICAgICAgICAgICAgbmFtZTogJ3RyZWJsZScsCiAgICAgICAgICAgICAgbW9kZTogJ2FueScsCiAgICAgICAgICAgICAgYWJvdmVMZXZlbDogMjUsCiAgICAgICAgICAgICAgdGhyZXNob2xkOiAtMTAsCiAgICAgICAgICAgICAgZXhjbHVkZUJlbG93OiAyMCwKICAgICAgICAgICAgICBleFRocmVzaG9sZDogLTQwLAogICAgICAgICAgICAgIHJlbGVhc2U6IDUwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHByZXZpb3VzRGVsdGEgPSBjdXJyZW50RGVsdGE7CiAgICAgICAgfQoKICAgICAgICBpZiAob2JqZWN0LnBsYXlpbmcoKSkgewogICAgICAgICAgY29tcG9uZW50Q29udGV4dC5zb3VuZE9iamVjdFJBRiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGVQcm9ncmVzcy5iaW5kKG9iamVjdCkpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/hervey/Projects/Development/bug/src/mixins/AudioFunctions.js"],"names":["Vue","_","Howl","Howler","AudioFunctions","methods","playBeat","componentContext","stop","methodsReference","currentLevel","soundObject","volume","play","loadSound","stopSound","fadeOutTime","fade","fadeTimer","setTimeout","pauseSound","updateCurrentTime","currentTime","seek","data","clearTimout","set","src","filename","onplay","soundObjectRAF","requestAnimationFrame","updateProgress","bind","onload","_duration","onend","cancelAnimationFrame","nextIndex","levels","findIndex","song","_id","length","endGame","onpause","onstop","onseek","context","ctx","audioSourceNode","createBufferSource","analyser","createAnalyser","fftSize","bufferLength","frequencyBinCount","dataArray","mode","Float32Array","Uint8Array","connect","masterGain","getLevels","levelsHertz","levelsPerc","sectionSplit","sections","finalArray","from","sec","minBin","maxBin","numOfBins","binItems","i","calcNum","hertz","Math","log10","perc","toFixed","push","audio","detectLevel","options","hertzTest","aboveLevel","anyAbove","levelIndex","threshold","excludeBelow","numOfLevels","maxLevel","minLevel","levelItems","includeHertz","excludeHertz","minExclude","numOfExLevels","maxExclude","exLevelItems","exLevelIndex","exThreshold","name","songTimer","clearTimeout","release","bassSteps","newStep","current","count","previousDelta","fpsLimit","currentDelta","object","delta","_sounds","getFloatTimeDomainData","getByteTimeDomainData","power","playing"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport _ from 'lodash';\nimport { Howl, Howler } from 'howler';\nexport const AudioFunctions = {\n    methods: {\n        playBeat(componentContext) {\n            Howler.stop()\n            const methodsReference = this;\n            if (componentContext.currentLevel.soundObject) {\n            componentContext.currentLevel.soundObject.volume(1);\n            componentContext.currentLevel.soundObject.play();\n            } else {\n                methodsReference.loadSound(componentContext);\n            }\n        },\n        stopSound(componentContext) {\n\n            // Fade out then stop\n            const fadeOutTime = 500;\n            componentContext.currentLevel.soundObject.fade(1, 0, 500);\n            componentContext.currentLevel.fadeTimer = setTimeout(function(){\n                componentContext.currentLevel.soundObject.stop();\n            }, fadeOutTime);\n            \n        },\n        pauseSound(componentContext) {\n            componentContext.currentLevel.soundObject.play();\n        },\n        updateCurrentTime(componentContext) {\n            var currentTime = componentContext.currentLevel.soundObject.seek() || 0;\n        },\n        loadSound(componentContext) {\n            var data = {\n                methodsReference: this\n            };\n            \n            // Clear fade timer\n            if (componentContext.currentLevel.fadeTimer) {\n                clearTimout(componentContext.currentLevel.fadeTimer);\n            }\n\n            // Create sound object\n            Vue.set(componentContext.currentLevel, 'soundObject', new Howl({\n                src: './audio/'+ componentContext.currentLevel.filename + '.mp3',\n                volume: 1,\n\n                // Events\n                onplay: function () {\n                    data.methodsReference.updateCurrentTime(componentContext, componentContext.currentLevel.soundObject);\n                    componentContext.soundObjectRAF = requestAnimationFrame(updateProgress.bind(componentContext.currentLevel.soundObject));\n                },\n                onload: function () {\n                    Vue.set(componentContext.currentLevel, 'duration', componentContext.currentLevel.soundObject._duration);\n                    data.methodsReference.playBeat(componentContext);\n                },\n                onend: function () {\n                    cancelAnimationFrame(componentContext.soundObjectRAF);\n                    var nextIndex = componentContext.levels.findIndex(song => song._id === componentContext.currentLevel._id) + 1;\n                    if (nextIndex === componentContext.levels.length) {\n                        componentContext.endGame();\n                    } else {\n                        componentContext.currentLevel = componentContext.levels[nextIndex];\n                        data.methodsReference.playBeat(componentContext);\n                    }\n                },\n                onpause: function () {\n                    cancelAnimationFrame(componentContext.soundObjectRAF);\n                },\n                onstop: function () {\n                    cancelAnimationFrame(componentContext.soundObjectRAF);\n                },\n                onseek: function () {\n                    data.methodsReference.updateCurrentTime(componentContext, componentContext.currentLevel.soundObject);\n                    componentContext.soundObjectRAF = requestAnimationFrame(updateProgress.bind(componentContext.currentLevel.soundObject));\n                }\n            }));\n\n            // Effects\n            // Create an analyser node in the Howler WebAudio context\n            var context = Howler.ctx;\n            const audioSourceNode = context.createBufferSource(componentContext.currentLevel.soundObject);\n            var analyser = context.createAnalyser();\n            analyser.fftSize = 1024;\n            const bufferLength = analyser.frequencyBinCount;\n\n            var dataArray;\n            var mode = 2;\n            if (mode === 1) {\n                dataArray = new Float32Array(analyser.fftSize);\n            } else {\n                dataArray = new Uint8Array(analyser.fftSize);\n            }\n\n            audioSourceNode.connect(analyser);\n            Howler.masterGain.connect(analyser);\n\n            // Get levels\n            function getLevels() {\n                var levelsHertz = [];\n                var levelsPerc = [];\n                var sectionSplit = 16;\n                var sections = bufferLength / sectionSplit;\n                if (mode === 1 || mode === 2) {\n                    var finalArray = dataArray;\n                    if (mode === 2) {\n                        finalArray = Float32Array.from(dataArray)\n                    }\n\n                    for (let sec = 0; sec < sections; sec++) {\n                        const minBin = (sec * sectionSplit);\n                        const maxBin = ((sec + 1) * sectionSplit);\n                        const numOfBins = maxBin - minBin;\n                        let binItems = 0;\n                        for (let i = minBin; i < maxBin; i++) {\n                            var calcNum = finalArray[i];\n                            if (mode === 2) {\n                                calcNum = (calcNum - 128) / 128;\n                            }\n\n                            binItems += calcNum ** 2;\n                        }\n                        const hertz = 10 * Math.log10(binItems / numOfBins);\n                        const perc = (100 + (hertz)).toFixed();\n                        levelsHertz.push(hertz);\n                        levelsPerc.push(perc);\n                    }\n                }\n\n                // Update levels\n                var levels = {\n                    'hertz': levelsHertz,\n                    'perc': levelsPerc\n                }\n                Vue.set(componentContext.audio, 'levels', levels);\n                return levels;\n            }\n            function detectLevel(options) {\n                var hertzTest = true;\n                var levels = getLevels();\n\n                if (options.mode === 'any') {\n                    if (options.aboveLevel) {\n                        var anyAbove = false;\n                        for (let levelIndex = options.aboveLevel; levelIndex < levels.hertz.length; levelIndex++) {\n                            if (levels.hertz[levelIndex] > (options.threshold)) { anyAbove = true }\n                        }\n                        if (options.excludeBelow) {\n                            for (let levelIndex = 0; levelIndex < options.excludeBelow; levelIndex++) {\n                                if (levels.hertz[levelIndex] > (options.threshold)) {\n                                    anyAbove = false\n                                }\n                            }\n                        }\n                        if (anyAbove === false) {\n                            hertzTest = false;\n                        }\n                    }\n                }\n                else {\n                    var numOfLevels = options.maxLevel - options.minLevel;\n                    var levelItems = 0;\n                    for (let levelIndex = options.minLevel; levelIndex < options.maxLevel; levelIndex++) {\n                        levelItems += levels.hertz[levelIndex];\n                    }\n                    const includeHertz = (levelItems / numOfLevels);\n                    var excludeHertz;\n                    if (options.minExclude) {\n                        var numOfExLevels = options.maxExclude - options.minExclude;\n                        var exLevelItems = 0;\n                        for (let exLevelIndex = options.minExclude; exLevelIndex < options.maxExclude; exLevelIndex++) {\n                            exLevelItems += levels.hertz[exLevelIndex];\n                        }\n                        excludeHertz = (exLevelItems / numOfExLevels);\n                    }\n\n                    if (includeHertz < (options.threshold)) { hertzTest = false }\n                    if (excludeHertz && excludeHertz > (options.exThreshold)) { hertzTest = false }\n                }\n                if (hertzTest === true) {\n                    Vue.set(componentContext.audio, options.name, true);\n                    const songTimer = options.name + 'Timer';\n                    if (componentContext.audio[songTimer]) {\n                        clearTimeout(componentContext.audio[songTimer]);\n                    }\n                    Vue.set(componentContext.audio, songTimer, setTimeout(function () {\n                        Vue.set(componentContext.audio, options.name, false);\n                        Vue.set(componentContext.audio, songTimer, \"\");\n                    }, options.release));\n\n                    // Bass steps\n                    if (options.bassSteps) {\n                        if (1 === 1 /*componentContext.currentLevel.bassSteps && componentContext.currentLevel.bassSteps.current !== false*/) {\n                            if (1 === 1 /*componentContext.bassSteps['trigger'] === true*/) {\n                                Vue.set(componentContext.audio.bassSteps, 'trigger', false); // Trigger off\n\n                                // Next step\n                                var newStep = componentContext.audio.bassSteps.current + 1 > options.bassSteps.count ? 0 :\n                                    componentContext.audio.bassSteps.current + 1;\n                                Vue.set(componentContext.audio.bassSteps, 'current', newStep);\n\n                                // Trigger timer\n                                Vue.set(componentContext.audio.bassSteps, 'timer', setTimeout(function () {\n                                    Vue.set(componentContext.audio.bassSteps, 'trigger', true); // Trigger on\n                                }, '100'));\n                            }\n                        } else {\n                            Vue.set(componentContext, 'audio.bassSteps.trigger', false); // Trigger off\n                            Vue.set(componentContext, 'audio.bassSteps', { 'current': 0 }); // Initial step\n\n                            // Trigger timer\n                            Vue.set(componentContext.audio.bassSteps, 'timer', setTimeout(function () {\n                                Vue.set(componentContext.audio.bassSteps, 'trigger', true); // Trigger on\n                            }, '87.5'));\n                        }\n                    }\n                }\n            }\n            var previousDelta = 0,\n                fpsLimit = 60;\n            function updateProgress(currentDelta) {\n                var object = this;\n                var delta = currentDelta - previousDelta;\n                if (fpsLimit && delta < 1000 / fpsLimit) {\n                    // Wait\n                } else {\n                    // If sound node exists in this moment\n                    if (object._sounds[0]) {\n                        data.methodsReference.updateCurrentTime(componentContext, object);\n\n                            // Frequency animate\n                            if (mode === 1) {\n                                analyser.getFloatTimeDomainData(dataArray)\n                            } else if (mode === 2) {\n                                analyser.getByteTimeDomainData(dataArray);\n                            }\n                            getLevels();\n\n                            // Deep Bass\n                            detectLevel({\n                                name: 'deepBass',\n                                minLevel: 1,\n                                maxLevel: 7,\n                                threshold: -5,\n                                release: 250,\n                                bassSteps: {\n                                    power: true,\n                                    count: 6\n                                }\n                            });\n\n                            // Crazy Bass\n                            detectLevel({\n                                name: 'crazyBass',\n                                minLevel: 1,\n                                maxLevel: 4,\n                                threshold: -1,\n                                release: 250\n                            });\n\n                            // Mid Bass\n                            detectLevel({\n                                name: 'midBass',\n                                minLevel: 5,\n                                maxLevel: 10,\n                                threshold: -10,\n                                release: 250\n                            });\n\n                            // Trebel\n                            detectLevel({\n                                name: 'treble',\n                                mode: 'any',\n                                aboveLevel: 25,\n                                threshold: -10,\n                                excludeBelow: 20,\n                                exThreshold: -40,\n                                release: 50\n                            });\n\n                    }\n                    previousDelta = currentDelta;\n                }\n                if (object.playing()) {\n                    componentContext.soundObjectRAF = requestAnimationFrame(updateProgress.bind(object));\n                }\n            }\n        }\n    }\n}"]}]}